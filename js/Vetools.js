const _0x4895=['replace','values','HOMEBREW_COLLECTION_INDEX','isNonstandardSource','getDirUrl','warn','getRollableEntryDice','external','copy','pGetTokenUrl','_pGetHomebrewCollectionIndex','homebrewMeta','tokenUrl','has','BASE_SITE_URL','sourceJsonToSource','_pubDate','images','DATA_URL_OPTIONALFEATURES','Failed\x20to\x20load\x20homebrew\x20index!\x20','getSpellUrl','keys','getInternalImageUrl','loadJSON','getCreatureFluff','link','options','min','RUN_TIME','BESTIARY_TOKEN_LOOKUP','data/optionalfeatures.json','getImageUrlFromFluff','slice','getJsonSources','setBaseUrl','_getAdventureBookUrl','pGetCreatureIndex','$1/','DATA_URL_BACKGROUNDS','entries','modules/','catch','sourceJsonToAbv','init','data/variantrules.json','pLoadCollectionIndex','item','STR_SEE_CONSOLE','error','toMessage','warning','monster','data/backgrounds.json','_pGetTokenUrl','info','mergeSubraces','brew','published','race','sourceJsonToFull','source','DATA_URL_FEATS','pLoadAll','pPreloadMeta','img/blank.png','getValidColor','CACHE_REQUESTS_IN_FLIGHT','pRollEntry','doToast','string','parse','DATA_URL_CONDITIONSDISEASES','FILE_BESTIARY_TOKEN_LOOKUP','HOMEBREW_META_SOURCES','.json','url','pDoMetaMerge','adventures.json','pGetWithCache','name','nameToTokenName','data/bestiary/','map','prompt','MODULE_NAME','length','json','pGetHomebrewSources','data/','pGetSpellIndex','push','[[/r\x20','pGetAllCreatures','get','style=\x22color:\x20#','pGetItems','hasToken','_meta','books.json','spell','CACHED_REQUESTS','adventure','pGetAdventureIndex','flat','join','pGetBookIndex','getBookUrl','hasSourceJson','baseUrl','getCreatureUrl','dice','import','data/races.json','data','/data/','toRoll','data/spells/','plutonium.configUpdate','data/conditionsdiseases.json','legacyDiceToString','DATA_URL_PSIONICS','rollerClick','trim','data/feats.json','getTokenUrl','data/psionics.json','doMonkeyPatch','sources','table','data/bestiary/index.json','path','BESTIARY_FLUFF_INDEX','pDelay','1970-01-01','DATA_URL_VARIANTRULES','all','type','_pGetAdventureBookIndex','abbreviation','startsWith','pGetRaces','href','notifications','ascSortLower','includes','filter','data/spells/index.json','pGetCreatureFluffIndex','color','_BASE_SITE_URL','forEach','full','content','book','split','add','getAdventureUrl'];(function(_0x21d238,_0x4895ff){const _0x2b87b3=function(_0x1cf0a0){while(--_0x1cf0a0){_0x21d238['push'](_0x21d238['shift']());}};_0x2b87b3(++_0x4895ff);}(_0x4895,0xf2));const _0x2b87=function(_0x21d238,_0x4895ff){_0x21d238=_0x21d238-0x0;let _0x2b87b3=_0x4895[_0x21d238];return _0x2b87b3;};'use strict';import{SharedConsts}from'../shared/SharedConsts.js';import{Consts}from'./Consts.js';import{JqueryExtension}from'./JqueryExtension.js';import{Config}from'./Config.js';class NotAxios{static async[_0x2b87('0x8')](_0x15c4e2){return{'data':await(await fetch(_0x15c4e2))[_0x2b87('0x1')]()};}}class Vetools{static async['pDoPreload'](){await Promise['all']([Vetools[_0x2b87('0x2e')]=await Vetools[_0x2b87('0x3e')](),DataUtil[_0x2b87('0x7b')][_0x2b87('0x87')]()]);Vetools[_0x2b87('0x52')]()['then'](_0x3e425c=>Vetools[_0x2b87('0x4a')]=_0x3e425c)[_0x2b87('0x71')](_0x107a10=>{ui[_0x2b87('0x39')][_0x2b87('0x78')]('Failed\x20to\x20load\x20homebrew\x20index!\x20'+VeCt[_0x2b87('0x77')]);setTimeout(()=>{throw _0x107a10;});});}static[_0x2b87('0x29')](){JqueryExtension[_0x2b87('0x73')]();Renderer[_0x2b87('0x8')]()[_0x2b87('0x6a')](Vetools['BASE_SITE_URL']);Hooks['on'](_0x2b87('0x20'),()=>Renderer[_0x2b87('0x8')]()[_0x2b87('0x6a')](Vetools['BASE_SITE_URL']));BrewUtil['homebrew']={};BrewUtil[_0x2b87('0x53')]={};Renderer[_0x2b87('0x4e')]=(_0x43c54f,_0x3cb855,_0x463167=!![],_0x2560af)=>{const _0x3dad70=MiscUtil['copy'](_0x43c54f);if(typeof _0x3dad70[_0x2b87('0x1e')]!==_0x2b87('0x8d')){_0x3dad70[_0x2b87('0x1e')]=Renderer[_0x2b87('0x22')](_0x3dad70['toRoll']);}if(_0x3dad70['prompt']){const _0x1d268c=Math[_0x2b87('0x63')](...Object[_0x2b87('0x5d')](_0x3dad70['prompt'][_0x2b87('0x62')])[_0x2b87('0x9a')](_0x3cbb29=>Number(_0x3cbb29))[_0x2b87('0x3c')](_0x23c1f0=>_0x3dad70[_0x2b87('0x9b')]['options'][_0x23c1f0]));_0x3dad70[_0x2b87('0x1e')]=_0x3dad70[_0x2b87('0x9b')][_0x2b87('0x62')][_0x1d268c];}return _0x2b87('0x6')+_0x3dad70['toRoll']+']]'+(_0x3dad70[_0x2b87('0x1e')]['toLowerCase']()[_0x2b87('0x25')]()!==_0x2560af['toLowerCase']()[_0x2b87('0x25')]()?'\x20('+_0x2560af+')':'');};Renderer[_0x2b87('0x19')][_0x2b87('0x24')]=(_0x21475f,_0x11aa14,_0x24f1b5,_0x520edb)=>{const _0x175dfc=JSON[_0x2b87('0x8e')](_0x24f1b5);if(_0x175dfc[_0x2b87('0x1e')])new Roll(_0x175dfc[_0x2b87('0x1e')])[_0x2b87('0x79')]();};Renderer[_0x2b87('0x19')][_0x2b87('0x8b')]=(_0x2a9c02,_0xc7e66,_0x180459)=>{if(_0x2a9c02['toRoll'])new Roll(_0x2a9c02[_0x2b87('0x1e')])[_0x2b87('0x79')]();};JqueryUtil[_0x2b87('0x8c')]=_0x170463=>{if(typeof _0x170463==='string'){_0x170463={'content':_0x170463,'type':_0x2b87('0x7e')};}_0x170463[_0x2b87('0x33')]=_0x170463[_0x2b87('0x33')]||_0x2b87('0x7e');switch(_0x170463[_0x2b87('0x33')]){case _0x2b87('0x7a'):return ui['notifications'][_0x2b87('0x4d')](_0x170463[_0x2b87('0x43')]);case'danger':return ui[_0x2b87('0x39')]['error'](_0x170463[_0x2b87('0x43')]);default:return ui[_0x2b87('0x39')]['info'](_0x170463['content']);}};DataUtil[_0x2b87('0x5f')]=async _0xe7c210=>Vetools[_0x2b87('0x96')](_0xe7c210);BrewUtil[_0x2b87('0x16')]=_0x3d2a8b=>!!Vetools[_0x2b87('0x91')][_0x3d2a8b];BrewUtil[_0x2b87('0x72')]=_0x1615db=>(Vetools[_0x2b87('0x91')][_0x1615db]||{})[_0x2b87('0x35')]||_0x1615db;BrewUtil[_0x2b87('0x83')]=_0x103104=>(Vetools[_0x2b87('0x91')][_0x103104]||{})[_0x2b87('0x42')]||_0x103104;BrewUtil[_0x2b87('0x57')]=_0x587ff1=>Vetools['HOMEBREW_META_SOURCES'][_0x587ff1];BrewUtil['sourceJsonToStyle']=_0x2ef258=>{if(Vetools['HOMEBREW_META_SOURCES'][_0x2ef258]&&Vetools[_0x2b87('0x91')][_0x2ef258][_0x2b87('0x3f')]){const _0x36f6a6=BrewUtil[_0x2b87('0x89')](Vetools[_0x2b87('0x91')][_0x2ef258]['color']);if(_0x36f6a6[_0x2b87('0x0')])return _0x2b87('0x9')+_0x36f6a6+';\x22';return'';}else return'';};BrewUtil[_0x2b87('0x69')]=()=>Object[_0x2b87('0x49')](Vetools[_0x2b87('0x91')]);}static async[_0x2b87('0x96')](_0x31de2a){if(!_0x31de2a['includes']('?'))_0x31de2a=_0x31de2a+'?t='+Consts[_0x2b87('0x64')];const _0x50906f=_0x31de2a['split'](/(^https?:\/\/)/)[_0x2b87('0x3c')](Boolean);_0x50906f[_0x50906f[_0x2b87('0x0')]-0x1]=_0x50906f['last']()[_0x2b87('0x48')](/\/+/g,'/');_0x31de2a=_0x50906f[_0x2b87('0x13')]('');const _0x300cd3=_0x31de2a[_0x2b87('0x45')]('?')[0x0];if(Vetools[_0x2b87('0x8a')][_0x300cd3]){await Vetools[_0x2b87('0x8a')][_0x300cd3];return Vetools[_0x2b87('0xf')][_0x300cd3];}Vetools[_0x2b87('0x8a')][_0x300cd3]=(async()=>{let _0x5eff65;if(_0x31de2a[_0x2b87('0x36')](Vetools['BASE_SITE_URL']+'data/')){const _0x3f080b=_0x31de2a[_0x2b87('0x45')](Vetools[_0x2b87('0x56')])[_0x2b87('0x68')](0x1)[_0x2b87('0x13')](Vetools['BASE_SITE_URL']);const _0x21035a=_0x2b87('0x70')+SharedConsts['MODULE_NAME']+'/'+_0x3f080b;_0x5eff65=(await NotAxios[_0x2b87('0x8')](_0x21035a))['data'];}else{_0x5eff65=(await NotAxios[_0x2b87('0x8')](_0x31de2a))[_0x2b87('0x1c')];}if(_0x5eff65[_0x2b87('0xc')]&&_0x5eff65[_0x2b87('0xc')][_0x2b87('0x2a')])_0x5eff65[_0x2b87('0xc')][_0x2b87('0x2a')][_0x2b87('0x41')](_0x48d3af=>Vetools['HOMEBREW_META_SOURCES'][_0x48d3af['json']]=MiscUtil['copy'](_0x48d3af));await DataUtil[_0x2b87('0x94')](_0x300cd3,_0x5eff65);return Vetools[_0x2b87('0xf')][_0x300cd3]=_0x5eff65;})();await Vetools[_0x2b87('0x8a')][_0x300cd3];return Vetools['CACHED_REQUESTS'][_0x300cd3];}static async['pGetSpellIndex'](){const _0xc6e9e1=Vetools[_0x2b87('0x56')]+_0x2b87('0x3d');return Vetools[_0x2b87('0x96')](_0xc6e9e1);}static[_0x2b87('0x5c')](_0x398763){return Vetools[_0x2b87('0x56')]+_0x2b87('0x1f')+_0x398763;}static async[_0x2b87('0x6c')](){const _0x23c76c=Vetools[_0x2b87('0x56')]+_0x2b87('0x2c');return Vetools['pGetWithCache'](_0x23c76c);}static[_0x2b87('0x18')](_0x265591){return Vetools[_0x2b87('0x56')]+_0x2b87('0x99')+_0x265591;}static async['pGetCreatureFluffIndex'](){const _0x1067e7=Vetools[_0x2b87('0x56')]+'data/bestiary/fluff-index.json';return Vetools['pGetWithCache'](_0x1067e7);}static async[_0x2b87('0x60')](_0x3526b2){const _0x494738=Vetools[_0x2b87('0x56')]+_0x2b87('0x99')+_0x3526b2;return Vetools[_0x2b87('0x96')](_0x494738);}static async[_0x2b87('0xa')](_0xc56c63){return{'item':await Renderer[_0x2b87('0x76')]['pBuildList']({'isAddGroups':!!_0xc56c63})};}static async['pGetItemFluff'](){const _0x394b95=Vetools[_0x2b87('0x56')]+'data/fluff-items.json';return Vetools[_0x2b87('0x96')](_0x394b95);}static async[_0x2b87('0x37')](_0x5d56ef){_0x5d56ef=_0x5d56ef||{};const _0xfd78e0=Vetools[_0x2b87('0x56')]+_0x2b87('0x1b');const _0x1d1a71=await Vetools[_0x2b87('0x96')](_0xfd78e0);const _0x508cab=Renderer[_0x2b87('0x82')][_0x2b87('0x7f')](_0x1d1a71[_0x2b87('0x82')],_0x5d56ef);return{'race':_0x508cab};}static async['pGetClasses'](){return DataUtil['class']['loadJSON'](Vetools['BASE_SITE_URL']);}static async['pGetRollableTables'](){return DataUtil[_0x2b87('0x2b')][_0x2b87('0x86')](Vetools[_0x2b87('0x56')]);}static async['_pGetAdventureBookIndex'](_0x4486e6,_0x4d7507){const _0x4e20e0=Vetools[_0x2b87('0x56')]+_0x2b87('0x3')+_0x4486e6;const _0x2f22b6=await Vetools[_0x2b87('0x96')](_0x4e20e0);_0x2f22b6[_0x4d7507][_0x2b87('0x41')](_0x1a947e=>_0x1a947e[_0x2b87('0x58')]=new Date(_0x1a947e[_0x2b87('0x81')]||_0x2b87('0x30')));return _0x2f22b6;}static async[_0x2b87('0x11')](){return this[_0x2b87('0x34')](_0x2b87('0x95'),'adventure');}static async[_0x2b87('0x14')](){return this['_pGetAdventureBookIndex'](_0x2b87('0xd'),_0x2b87('0x44'));}static[_0x2b87('0x6b')](_0x373bac,_0x89857b){return Vetools[_0x2b87('0x56')]+_0x2b87('0x3')+_0x373bac+'/'+_0x373bac+'-'+_0x89857b['toLowerCase']()+_0x2b87('0x92');}static[_0x2b87('0x47')](_0x138291){return this['_getAdventureBookUrl'](_0x2b87('0x10'),_0x138291);}static[_0x2b87('0x15')](_0x206f2b){return this[_0x2b87('0x6b')](_0x2b87('0x44'),_0x206f2b);}static[_0x2b87('0x67')](_0x12139b){if(_0x12139b&&_0x12139b[_0x2b87('0x59')]&&_0x12139b[_0x2b87('0x59')][0x0]){const _0xad6a48=_0x12139b[_0x2b87('0x59')][0x0];if(_0xad6a48[_0x2b87('0x38')]){if(_0xad6a48['href'][_0x2b87('0x33')]==='internal')return _0xad6a48[_0x2b87('0x38')][_0x2b87('0x2d')]?''+Vetools[_0x2b87('0x5e')](_0xad6a48['href'][_0x2b87('0x2d')]):'';else if(_0xad6a48[_0x2b87('0x38')][_0x2b87('0x33')]===_0x2b87('0x4f'))return _0xad6a48[_0x2b87('0x38')][_0x2b87('0x93')]||'';}}}static async['pHasTokenUrl'](_0x5ea306){return(await Vetools[_0x2b87('0x7d')](_0x5ea306))[_0x2b87('0xb')];}static async[_0x2b87('0x51')](_0xb4e49c){return(await Vetools[_0x2b87('0x7d')](_0xb4e49c))[_0x2b87('0x93')];}static async['_pGetTokenUrl'](_0x58a1ea){if(_0x58a1ea[_0x2b87('0x54')])return{'url':_0x58a1ea[_0x2b87('0x54')],'hasToken':!![]};if(!Vetools[_0x2b87('0x65')])Vetools[_0x2b87('0x65')]=(await NotAxios['get'](_0x2b87('0x70')+SharedConsts[_0x2b87('0x9c')]+_0x2b87('0x1d')+SharedConsts[_0x2b87('0x90')]))['data'];const _0x46f590=Parser[_0x2b87('0x72')](_0x58a1ea['source']);const _0x4c00ca=Parser[_0x2b87('0x98')](_0x58a1ea[_0x2b87('0x97')]);if((Vetools[_0x2b87('0x65')][_0x46f590]||{})[_0x4c00ca])return{'url':Renderer[_0x2b87('0x7b')][_0x2b87('0x27')](_0x58a1ea),'hasToken':!![]};return{'url':UrlUtil[_0x2b87('0x61')](Renderer[_0x2b87('0x8')]()[_0x2b87('0x17')]+_0x2b87('0x88')),'hasToken':![]};}static[_0x2b87('0x5e')](_0xf548ee){return Vetools[_0x2b87('0x56')]+'img/'+encodeURIComponent(_0xf548ee);}static async['pGetAllSpells'](_0x28ab29=![]){const _0x361249=await Vetools[_0x2b87('0x4')]();const _0xa1471b=await Promise[_0x2b87('0x32')](Object[_0x2b87('0x6f')](_0x361249)[_0x2b87('0x3c')](([_0x324bfa])=>!_0x28ab29||!SourceUtil[_0x2b87('0x4b')](_0x324bfa))[_0x2b87('0x9a')](([_0x582c45,_0x42ff4c])=>Vetools[_0x2b87('0x96')](Vetools[_0x2b87('0x5c')](_0x42ff4c))));return{'spell':_0xa1471b[_0x2b87('0x9a')](_0x427963=>MiscUtil[_0x2b87('0x50')](_0x427963[_0x2b87('0xe')]))[_0x2b87('0x12')]()};}static async[_0x2b87('0x7')](_0x48d790=![]){const _0x518acd=await Vetools[_0x2b87('0x6c')]();const _0x487f59=await Promise[_0x2b87('0x32')](Object[_0x2b87('0x6f')](_0x518acd)[_0x2b87('0x3c')](([_0x419922])=>!_0x48d790||!SourceUtil[_0x2b87('0x4b')](_0x419922))[_0x2b87('0x9a')](async([_0x16abcd,_0x22d315])=>({'source':_0x16abcd,'json':await Vetools[_0x2b87('0x96')](Vetools[_0x2b87('0x18')](_0x22d315))})));return{'monster':_0x487f59[_0x2b87('0x9a')](_0x17d37e=>MiscUtil[_0x2b87('0x50')](_0x17d37e[_0x2b87('0x1')][_0x2b87('0x7b')][_0x2b87('0x3c')](_0x5d865d=>_0x5d865d['source']===_0x17d37e[_0x2b87('0x84')])))['flat']()};}static async[_0x2b87('0x52')](){let _0x40e56c={};try{_0x40e56c=await DataUtil[_0x2b87('0x80')][_0x2b87('0x75')]();}catch(_0x5318a9){ui[_0x2b87('0x39')]['error']('Failed\x20to\x20load\x20homebrew\x20index!\x20'+VeCt[_0x2b87('0x77')]);setTimeout(()=>{throw _0x5318a9;});}return _0x40e56c;}static async[_0x2b87('0x2')](..._0x234007){const _0x20eb2b=(await Promise[_0x2b87('0x32')](_0x234007[_0x2b87('0x9a')](async _0x48588c=>{const _0x5b6d81=DataUtil[_0x2b87('0x80')][_0x2b87('0x4c')](_0x48588c);let _0x18fa22=[];try{_0x18fa22=await Promise[_0x2b87('0x82')]([DataUtil['loadJSON'](_0x5b6d81),MiscUtil[_0x2b87('0x2f')](0x1388,[])]);}catch(_0x3dce65){ui[_0x2b87('0x39')][_0x2b87('0x78')](_0x2b87('0x5b')+VeCt[_0x2b87('0x77')]);setTimeout(()=>{throw _0x3dce65;});}const _0x1d415c=Object[_0x2b87('0x5d')](Vetools[_0x2b87('0x4a')])[_0x2b87('0x3c')](_0x6c51ac=>Vetools[_0x2b87('0x4a')][_0x6c51ac][_0x2b87('0x3b')](BrewUtil['_pRenderBrewScreen_dirToCat'](_0x48588c)));if(_0x1d415c[_0x2b87('0x0')]){_0x18fa22=MiscUtil[_0x2b87('0x50')](_0x18fa22);let _0x220e79=[];try{_0x220e79=await Promise[_0x2b87('0x82')]([DataUtil['loadJSON'](DataUtil[_0x2b87('0x80')][_0x2b87('0x4c')]('collection')),MiscUtil[_0x2b87('0x2f')](0x1388,[])]);}catch(_0x2104cc){ui[_0x2b87('0x39')][_0x2b87('0x78')](_0x2b87('0x5b')+VeCt[_0x2b87('0x77')]);setTimeout(()=>{throw _0x2104cc;});}_0x220e79[_0x2b87('0x3c')](_0x2d3188=>_0x1d415c[_0x2b87('0x3b')](_0x2d3188[_0x2b87('0x97')]))[_0x2b87('0x41')](_0x3ad024=>_0x18fa22[_0x2b87('0x5')](_0x3ad024));}return _0x18fa22[_0x2b87('0x9a')](_0x4620d9=>({'url':_0x4620d9['download_url'],'name':_0x4620d9[_0x2b87('0x97')][_0x2b87('0x25')]()['replace'](/\.json$/i,'')}));})))[_0x2b87('0x12')]();const _0x48fdd2=new Set();const _0x358761=_0x20eb2b[_0x2b87('0x3c')](_0x1a4fab=>{if(_0x48fdd2[_0x2b87('0x55')](_0x1a4fab[_0x2b87('0x93')]))return![];return _0x48fdd2[_0x2b87('0x46')](_0x1a4fab['url'])&&!![];});return _0x358761['sort']((_0x2ab19e,_0x239a38)=>SortUtil[_0x2b87('0x3a')](_0x2ab19e[_0x2b87('0x97')],_0x239a38[_0x2b87('0x97')]));}static async['pGetSpellAdditionalData'](){const _0x3f8dfa=Vetools[_0x2b87('0x56')]+'data/spells/foundry.json';return Vetools[_0x2b87('0x96')](_0x3f8dfa);}static get['BASE_SITE_URL'](){let _0x4ffc55=Config[_0x2b87('0x8')](_0x2b87('0x1a'),'baseSiteUrl');if(_0x4ffc55&&_0x4ffc55['trim']()){_0x4ffc55=_0x4ffc55[_0x2b87('0x48')](/^(.*?)([\\/]+)$/,_0x2b87('0x6d'));return _0x4ffc55;}return Vetools[_0x2b87('0x40')];}static get[_0x2b87('0x85')](){return Vetools['BASE_SITE_URL']+_0x2b87('0x26');}static get[_0x2b87('0x6e')](){return Vetools[_0x2b87('0x56')]+_0x2b87('0x7c');}static get[_0x2b87('0x31')](){return Vetools[_0x2b87('0x56')]+_0x2b87('0x74');}static get[_0x2b87('0x23')](){return Vetools[_0x2b87('0x56')]+_0x2b87('0x28');}static get[_0x2b87('0x5a')](){return Vetools['BASE_SITE_URL']+_0x2b87('0x66');}static get[_0x2b87('0x8f')](){return Vetools[_0x2b87('0x56')]+_0x2b87('0x21');}}Vetools['CACHED_REQUESTS']={};Vetools[_0x2b87('0x8a')]={};Vetools[_0x2b87('0x40')]='https://5e.tools/';Vetools['BESTIARY_FLUFF_INDEX']=null;Vetools['BESTIARY_TOKEN_LOOKUP']=null;Vetools[_0x2b87('0x4a')]={};Vetools[_0x2b87('0x91')]={};export{Vetools};