const _0x39f9=['sidebar','_collection','_sidebarTab','Delete\x20Folders','map','[name=\x22cb-prune-auto\x22]','_pDeleteItem','...','MODULE_LOCATION','teardown','Failed\x20to\x20delete\x20','[name=\x22btn-run\x22]','\x20data\x20will\x20be\x20permanently\x20deleted.</p>','fa-trash','Deleted\x20','content','checked','pGetConfirmation','_list','prop','has','render','activateListeners','<h3>Are\x20you\x20sure?</h3><p>','_$btnReset','notifications','STR_SEE_CONSOLE','pRunTasks','length','Delete\x20Complete','add','get','its','_activateListeners_initBtnReset','_collectionName','filter','Deleting\x20','Delete\x20','info','<h3>Are\x20you\x20sure?</h3><p>Any\x20empty\x20folders\x20will\x20be\x20permanently\x20deleted.</p>','children','/template/CollectionCleaner.handlebars','Collection\x20Cleaner','delete','data','activateTab','find','_activateListeners_initListAndFilters','click','_gameProp','_getSelectedIds','Delete','their','_pDoPrune','[name=\x22btn-prune\x22]','entities','uppercaseFirst','_activateListeners_initBtnRun','close','\x20folder','_rows','_pageFilter','Please\x20select\x20something\x20to\x20delete!','Task'];(function(_0x9a9f9a,_0x39f959){const _0x1c7491=function(_0x337d2b){while(--_0x337d2b){_0x9a9f9a['push'](_0x9a9f9a['shift']());}};_0x1c7491(++_0x39f959);}(_0x39f9,0x8c));const _0x1c74=function(_0x9a9f9a,_0x39f959){_0x9a9f9a=_0x9a9f9a-0x0;let _0x1c7491=_0x39f9[_0x9a9f9a];return _0x1c7491;};'use strict';import{SharedConsts}from'../shared/SharedConsts.js';import{UtilApplications}from'./UtilApplications.js';import{Util}from'./Util.js';import{BaseCollectionTool}from'./BaseCollectionTool.js';import{AppFilterBasic}from'./FilterApplications.js';class CollectionCleaner extends BaseCollectionTool{constructor(_0x380443){super({'title':_0x1c74('0x1e'),'template':SharedConsts[_0x1c74('0x3c')]+_0x1c74('0x1d'),'height':Util['getMaxWindowHeight'](),'width':0x280,'resizable':!![]},_0x380443);this[_0x1c74('0x31')]=new AppFilterBasic();this[_0x1c74('0x6')]=null;this[_0x1c74('0xc')]=null;}async['_pDoPrune'](_0x54afb6){const _0x363836=()=>Folder['collection'][_0x1c74('0x2b')][_0x1c74('0x17')](_0x1042bb=>_0x1042bb[_0x1c74('0x20')]['type']===this['_folderType']);const _0x2f271c=_0x54afb6?new Set(_0x54afb6):null;const _0x33a6a0=new Set();let _0xedd8e6=0x0;let _0x59aba0=null;let _0x2526cb=_0x363836()[_0x1c74('0x10')];do{let _0x174ae0;if(_0x54afb6){_0x174ae0=_0x363836()[_0x1c74('0x17')](_0x5da098=>{if(!_0x5da098[_0x1c74('0x1c')]||!_0x5da098['children'][_0x1c74('0x10')]){if(!_0x5da098['content'][_0x1c74('0x10')])return!![];const _0x264077=_0x5da098[_0x1c74('0x3')][_0x1c74('0x38')](_0x28f430=>_0x28f430['id'])[_0x1c74('0x17')](_0x5d9745=>_0x2f271c[_0x1c74('0x8')](_0x5d9745));if(_0x264077[_0x1c74('0x10')]===_0x5da098[_0x1c74('0x3')][_0x1c74('0x10')]){_0x264077['forEach'](_0x124954=>_0x33a6a0[_0x1c74('0x12')](_0x124954));return!![];}}return![];});}else{_0x174ae0=_0x363836()[_0x1c74('0x17')](_0x3a307b=>!_0x3a307b[_0x1c74('0x3')]['length']&&(!_0x3a307b[_0x1c74('0x1c')]||!_0x3a307b['children'][_0x1c74('0x10')]));}for(const _0x1e0b5a of _0x174ae0){await _0x1e0b5a[_0x1c74('0x1f')]({'deleteSubfolders':!![],'deleteContents':!![]});_0xedd8e6++;}_0x59aba0=_0x2526cb;_0x2526cb=_0x363836()[_0x1c74('0x10')];}while(_0x2526cb!==_0x59aba0);if(_0xedd8e6)ui[_0x1c74('0xd')][_0x1c74('0x1a')](_0x1c74('0x2')+_0xedd8e6+_0x1c74('0x2f')+(_0xedd8e6===0x1?'':'s')+'.');return _0x33a6a0;}[_0x1c74('0xa')](_0x1e05c7){super['activateListeners'](_0x1e05c7);this['_activateListeners_initBtnRun'](_0x1e05c7);this[_0x1c74('0x15')](_0x1e05c7);this[_0x1c74('0x23')](_0x1e05c7);}[_0x1c74('0x2d')](_0x458e12){const _0x143c6f=_0x458e12[_0x1c74('0x22')](_0x1c74('0x39'));_0x458e12[_0x1c74('0x22')](_0x1c74('0x3f'))[_0x1c74('0x24')](async()=>{if(!this[_0x1c74('0x6')])return;let _0x25b172=this[_0x1c74('0x26')]();if(!_0x25b172[_0x1c74('0x10')])return ui[_0x1c74('0xd')]['warn'](_0x1c74('0x32'));const _0xe42656=this[_0x1c74('0x16')][_0x1c74('0x2c')]();const _0x4a317c=_0x25b172[_0x1c74('0x10')]!==0x1?'s':'';const _0x16e67b=await UtilApplications[_0x1c74('0x5')]({'title':_0x1c74('0x19')+_0xe42656+_0x4a317c,'content':_0x1c74('0xb')+_0x25b172[_0x1c74('0x10')]+'\x20'+_0xe42656+_0x4a317c+'\x20and\x20'+(_0x4a317c?_0x1c74('0x28'):_0x1c74('0x14'))+_0x1c74('0x0'),'confirmText':_0x1c74('0x27'),'faIcon':_0x1c74('0x1')});if(!_0x16e67b)return;this[_0x1c74('0x2e')]();ui[_0x1c74('0x34')][_0x1c74('0x21')](this[_0x1c74('0x36')]);if(_0x143c6f['prop'](_0x1c74('0x4'))){const _0x45e0bf=await this['_pDoPrune'](_0x25b172[_0x1c74('0x38')](({id})=>id));_0x25b172=_0x25b172['filter'](({id})=>!_0x45e0bf[_0x1c74('0x8')](id));}const _0x12e3b8=_0x25b172['map'](({id,name})=>new Util[(_0x1c74('0x33'))](name,()=>this[_0x1c74('0x3a')](id)));await UtilApplications[_0x1c74('0xf')](_0x12e3b8,{'titleInitial':'Deleting...','titleComplete':_0x1c74('0x11'),'fnGetRowRunningText':_0x11818e=>_0x1c74('0x18')+_0x11818e+_0x1c74('0x3b'),'fnGetRowSuccessText':_0x1d8c9d=>'Deleted\x20'+_0x1d8c9d+'.','fnGetRowErrorText':_0xc8fb4e=>_0x1c74('0x3e')+_0xc8fb4e+'!\x20'+VeCt[_0x1c74('0xe')]});if(_0x143c6f[_0x1c74('0x7')]('checked'))await this[_0x1c74('0x29')]();game[this[_0x1c74('0x25')]][_0x1c74('0x9')]();});_0x458e12['find'](_0x1c74('0x2a'))['click'](async()=>{const _0x5cc023=await UtilApplications[_0x1c74('0x5')]({'title':_0x1c74('0x37'),'content':_0x1c74('0x1b'),'confirmText':'Delete','faIcon':_0x1c74('0x1')});if(!_0x5cc023)return;await this[_0x1c74('0x29')]();});}async[_0x1c74('0x3a')](_0x11ff14){await this[_0x1c74('0x35')][_0x1c74('0x13')](_0x11ff14)[_0x1c74('0x1f')]();}['getData'](){this[_0x1c74('0x30')]=this[_0x1c74('0x30')]=this['_mapEntitiesToRows']();return{...super['getData'](),'searchTitle':this[_0x1c74('0x16')]+'s','rows':this[_0x1c74('0x30')]};}[_0x1c74('0x2e')](..._0x1f85ea){super[_0x1c74('0x2e')](..._0x1f85ea);this['_pageFilter'][_0x1c74('0x3d')]();}}export{CollectionCleaner};