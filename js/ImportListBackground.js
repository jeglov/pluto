const _0x27ab=['languages','replace','SOURCE_TYP_BREW','_actor','_content','backgrounds','Custom\x20URL','sourceJsonToFull','isFeature','SRD','Upload\x20File','text-center','Name','custom','_pImportEntry_pImportToActor','log','DataSourceFile','SOURCE_TYP_OFFICIAL_ALL','map','absorbFnBindListenersRadio','isTemp','sourceLong','name','_pImportEntry_pFillItems','sourceShort','_list','absorbFnGetData','getItemActorPassive','value','items','SOURCE_TYP_CUSTOM','_pImportEntry_pImportToItems','doAbsorbItems','5etools','DATA_URL_BACKGROUNDS','data','mutateForFilters','sourceJsonToAbv','_pack','DataSourceUrl','toolProf','update','isStreamerMode','_pImportEntry_pGetFolderId','isCancelled','insert','Source','copy','/media/icon/mighty-force.svg','MODULE_NAME','languageProficiencies','_normalisedRange','length','getData','skillProficiencies','pAddActorItems','push','forEach','pImportEntry','_skillDisplay','background','feat','pGetHomebrewSources','_pageFilter','skills','isRadio','entries','toolProficiencies','Skills','create','Importing\x20background\x20\x22','get','Backgrounds','isToken','absorbFnBindListeners','source','_pImportEntry_pFillProficiencies','traits'];(function(_0x15bef6,_0x27ab3d){const _0x27f38b=function(_0x4ff702){while(--_0x4ff702){_0x15bef6['push'](_0x15bef6['shift']());}};_0x27f38b(++_0x27ab3d);}(_0x27ab,0xbf));const _0x27f3=function(_0x15bef6,_0x27ab3d){_0x15bef6=_0x15bef6-0x0;let _0x27f38b=_0x27ab[_0x15bef6];return _0x27f38b;};'use strict';import{ImportList}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{LGT}from'./Util.js';import{UtilActors}from'./UtilActors.js';import{DataConverter}from'./DataConverter.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';class ImportListBackground extends ImportList{constructor(_0x138b3c){_0x138b3c=_0x138b3c||{};super({'title':'Import\x20Backgrounds'},_0x138b3c,{'props':[_0x27f3('0x19')],'searchTitle':_0x27f3('0x30'),'sidebarTab':_0x27f3('0x48'),'gameProp':_0x27f3('0x48'),'defaultFolderPath':[_0x27f3('0x25')],'folderType':'Item','pageFilter':new PageFilterBackgrounds(),'isActorRadio':!![]});}async['pGetSources'](){return[new ImportList[(_0x27f3('0x4'))](Config[_0x27f3('0x24')]('ui',_0x27f3('0x7'))?_0x27f3('0x34'):_0x27f3('0x4c'),Vetools[_0x27f3('0x4d')],{'filterTypes':[ImportList[_0x27f3('0x3c')]]}),new ImportList['DataSourceUrl'](_0x27f3('0x31'),'',{'filterTypes':[ImportList[_0x27f3('0x49')]]}),new ImportList[(_0x27f3('0x3b'))](_0x27f3('0x35'),{'filterTypes':[ImportList[_0x27f3('0x49')]]}),...(await Vetools[_0x27f3('0x1b')](_0x27f3('0x19')))['map'](({name,url})=>new ImportList[(_0x27f3('0x4'))](name,url,{'filterTypes':[ImportList[_0x27f3('0x2d')]]}))];}[_0x27f3('0x12')](){const _0x43c4d4={...super['getData'](),'cols':[{'name':_0x27f3('0x37'),'width':0x4,'field':'name'},{'name':_0x27f3('0x21'),'width':0x6,'field':'skills'},{'name':_0x27f3('0xb'),'width':0x1,'field':_0x27f3('0x28'),'titleProp':_0x27f3('0x40'),'displayProp':_0x27f3('0x43'),'rowClassName':_0x27f3('0x36')}],'rows':this[_0x27f3('0x2f')][_0x27f3('0x3d')]((_0x1967fa,_0x745d9c)=>{this[_0x27f3('0x1c')][_0x27f3('0x1')](_0x1967fa);return{'name':_0x1967fa[_0x27f3('0x41')],'skills':_0x1967fa[_0x27f3('0x18')],'source':_0x1967fa[_0x27f3('0x28')],'sourceShort':Parser[_0x27f3('0x2')](_0x1967fa['source']),'sourceLong':Parser[_0x27f3('0x32')](_0x1967fa[_0x27f3('0x28')]),'ix':_0x745d9c};})};if(this[_0x27f3('0x2e')]){_0x43c4d4[_0x27f3('0x1e')]=!![];}return _0x43c4d4;}['_activateListeners_absorbListItems'](){this[_0x27f3('0x44')][_0x27f3('0x4b')](this[_0x27f3('0x2f')],{'fnGetName':_0x4a1c7d=>_0x4a1c7d[_0x27f3('0x41')],'fnGetValues':_0x2d2384=>({'source':_0x2d2384[_0x27f3('0x28')],'skills':_0x2d2384[_0x27f3('0x18')],'normalisedTime':_0x2d2384['_normalisedTime'],'normalisedRange':_0x2d2384[_0x27f3('0x10')]}),'fnGetData':UtilList2[_0x27f3('0x45')],'fnBindListeners':_0x57df79=>this[_0x27f3('0x2e')]?UtilList2[_0x27f3('0x3e')](this['_list'],_0x57df79):UtilList2[_0x27f3('0x27')](this[_0x27f3('0x44')],_0x57df79)});}async[_0x27f3('0x17')](_0x2c9ee5,_0x1d3cb0){_0x1d3cb0=_0x1d3cb0||{};console[_0x27f3('0x3a')](...LGT,_0x27f3('0x23')+_0x2c9ee5['name']+'\x22\x20(from\x20\x22'+Parser[_0x27f3('0x2')](_0x2c9ee5[_0x27f3('0x28')])+'\x22)');if(_0x1d3cb0[_0x27f3('0x3f')])return this[_0x27f3('0x4a')](_0x2c9ee5,_0x1d3cb0);else if(this[_0x27f3('0x2e')])return this['_pImportEntry_pImportToActor'](_0x2c9ee5,_0x1d3cb0);else return this[_0x27f3('0x4a')](_0x2c9ee5,_0x1d3cb0);}async[_0x27f3('0x39')](_0x24bbd9,_0x4d949c){const _0x561584={'data':{'details':{'background':_0x24bbd9[_0x27f3('0x41')]}}};const _0x277e61={'isCancelled':![]};await this[_0x27f3('0x29')](_0x24bbd9,_0x561584[_0x27f3('0x0')],_0x277e61);if(_0x277e61[_0x27f3('0x9')])return;await this['_pImportEntry_pFillItems'](_0x24bbd9,_0x561584,_0x277e61);this[_0x27f3('0x2e')][_0x27f3('0x6')](_0x561584);if(this['_actor'][_0x27f3('0x26')])this[_0x27f3('0x2e')]['sheet']['render']();return{'name':_0x24bbd9['name'],'actor':this['_actor']};}async[_0x27f3('0x4a')](_0x591a86,_0x176a40){const _0x300e58=DataConverter['getBackgroundItem'](_0x591a86,{'isAddPermission':!![]});if(_0x176a40[_0x27f3('0x3f')]||!this[_0x27f3('0x3')]){if(!_0x176a40[_0x27f3('0x3f')]){const _0x33d7ec=await this[_0x27f3('0x8')](_0x591a86);if(_0x33d7ec)_0x300e58['folder']=_0x33d7ec;}const _0x28f4bd=await Item[_0x27f3('0x22')](_0x300e58,{'renderSheet':!!_0x176a40[_0x27f3('0x3f')],'temporary':!!_0x176a40['isTemp']});if(!_0x176a40[_0x27f3('0x3f')])await game['items'][_0x27f3('0xa')](_0x28f4bd);return _0x28f4bd;}else{const _0x37da2c=new Item(_0x300e58);await this[_0x27f3('0x3')]['importEntity'](_0x37da2c);return _0x37da2c;}}async[_0x27f3('0x29')](_0x340a78,_0x654375,_0x4b92e8){const _0x3180c3=await DataConverter['pFillActorSkillData'](MiscUtil['get'](this[_0x27f3('0x2e')],_0x27f3('0x0'),_0x27f3('0x0'),_0x27f3('0x1d')),_0x340a78[_0x27f3('0x13')],_0x654375);if(_0x3180c3[_0x27f3('0x9')])_0x4b92e8[_0x27f3('0x9')]=!![];if(_0x4b92e8[_0x27f3('0x9')])return;_0x4b92e8[_0x27f3('0x9')]=await DataConverter['pFillActorLanguageData'](MiscUtil[_0x27f3('0x24')](this[_0x27f3('0x2e')],_0x27f3('0x0'),_0x27f3('0x0'),'traits','languages',_0x27f3('0x47')),MiscUtil[_0x27f3('0x24')](this[_0x27f3('0x2e')],_0x27f3('0x0'),_0x27f3('0x0'),'traits',_0x27f3('0x2b'),_0x27f3('0x38')),_0x340a78[_0x27f3('0xf')],_0x654375);if(_0x4b92e8[_0x27f3('0x9')])return;_0x4b92e8[_0x27f3('0x9')]=await DataConverter['pFillActorToolData'](MiscUtil[_0x27f3('0x24')](this[_0x27f3('0x2e')],'data',_0x27f3('0x0'),_0x27f3('0x2a'),'toolProf',_0x27f3('0x47')),MiscUtil[_0x27f3('0x24')](this['_actor'],_0x27f3('0x0'),'data',_0x27f3('0x2a'),_0x27f3('0x5'),_0x27f3('0x38')),_0x340a78[_0x27f3('0x20')],_0x654375);}async[_0x27f3('0x42')](_0x50b223,_0xda5df4,_0x4dc9cd){_0x4dc9cd[_0x27f3('0x48')]=[];const _0x100912=(_0x50b223[_0x27f3('0x1f')]||[])['filter'](_0x33ab14=>_0x33ab14[_0x27f3('0x0')]&&_0x33ab14['data'][_0x27f3('0x33')]);if(_0x100912[_0x27f3('0x11')]){_0x100912[_0x27f3('0x16')](_0x280c69=>{const _0x4747f8=MiscUtil[_0x27f3('0xc')](_0x280c69);if(_0x4747f8[_0x27f3('0x41')])_0x4747f8['name'][_0x27f3('0x2c')](/^.*?:\s*/,'');_0x4dc9cd['items'][_0x27f3('0x15')](DataConverter[_0x27f3('0x46')](_0x280c69,{'img':'modules/'+SharedConsts[_0x27f3('0xe')]+_0x27f3('0xd'),'fvttType':_0x27f3('0x1a'),'source':_0x50b223[_0x27f3('0x28')]}));});}if(_0x4dc9cd[_0x27f3('0x48')][_0x27f3('0x11')])await UtilActors[_0x27f3('0x14')](this[_0x27f3('0x2e')],_0x4dc9cd['items']);}}export{ImportListBackground};