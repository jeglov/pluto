const _0x1d1b=['_fnResolve','polymorphSettings','Cannot\x20polymorph:\x20','ImportList','accept','creatures-actorPolymorpher','cbSel','currentTarget','find','system-wide\x20player\x20polymorphing\x20is\x20disabled','\x20has\x20transformed\x20back\x20into\x20their\x20original\x20form,\x20and\x20requests\x20you\x20delete\x20their\x20temporary\x20polymorphed\x20actor\x20\x22','warn','_getAbsorbListItemOpts','<i\x20class=\x22fas\x20fa-times\x22></i>','render','notifications','DND5E.PolymorphAcceptSettings','_content','info','pPreRender','closest','can','DND5E.PolymorphKeepItems','.\x22\x20Proceed?</p><div><button\x20data-plut-actor-delete=\x22','_sourceActor','pHandleButtonClick','actor','data-plut-actor-delete','fnBindListeners','filter','getData','you\x20lack\x20actor\x20creation\x20permissions','isToken','<i\x20class=\x22fas\x20fa-pastafarianism\x22></i>','name','collection','DND5E.PolymorphMergeSaves','click','localize','classList','_pFnPostProcessEntries','DND5E.PolymorphKeepVision','_isResolveOnClose','Actor\x20\x22','ele','close','DND5E.PolymorphKeepBio','checked','DND5E.PolymorphKeepClass','attr','sourceActor','set','checled','entities','DND5E.PolymorphPromptTitle','ACTOR_CREATE','create','_list','<i\x20class=\x22fas\x20fa-check\x22></i>','ITEM_CREATE','<p>','remove','get','length','<i\x20class=\x22fas\x20fa-paw\x22></i>','Cancel','Deleted\x20actor\x20\x22','systems/dnd5e/templates/apps/polymorph-prompt.html','\x22>Delete</button></div>','_actor','body','list-multi-selected','escapeQuotes','_init_player','dialog','DND5E.PolymorphKeepSaves','\x22\x20not\x20found!','.restore-transformation','user','pGetSourceActor','_init_gm','DND5E.Polymorph','i18n','_$btnRun','Creatures','each','you\x20lack\x20item\x20creation\x20permissions','_fnReject','DND5E.PolymorphKeepSkills','actor-','pCreature','init','dnd5e','join','Creature','.sheet.actor','isGM','replace','data','map','users','settings','transformInto'];(function(_0xa75029,_0x1d1b9e){const _0x225772=function(_0x22e2b7){while(--_0x22e2b7){_0xa75029['push'](_0xa75029['shift']());}};_0x225772(++_0x1d1b9e);}(_0x1d1b,0x8f));const _0x2257=function(_0xa75029,_0x1d1b9e){_0xa75029=_0xa75029-0x0;let _0x225772=_0x1d1b[_0xa75029];return _0x225772;};import{ImportListCreature}from'./ImportListCreature.js';import{UtilList2}from'./UtilList2.js';import{ChooseImporter}from'./ChooseImporter.js';class ActorPolymorpher extends Dialog{static[_0x2257('0x33')](){if(game[_0x2257('0x26')][_0x2257('0x38')])this['_init_gm']();else this[_0x2257('0x21')]();}static[_0x2257('0x21')](){$(document['body'])['on'](_0x2257('0x64'),_0x2257('0x25'),_0xcf067d=>{const _0x44ff39=$(_0xcf067d[_0x2257('0x46')])[_0x2257('0x53')](_0x2257('0x37'))[_0x2257('0x9')]('id')[_0x2257('0x39')](_0x2257('0x31'),'');const _0x528794=Actor[_0x2257('0x62')]['get'](_0x44ff39);ChatMessage[_0x2257('0x10')]({'sound':'sounds/notify.wav','content':_0x2257('0x14')+game[_0x2257('0x26')]['name']+_0x2257('0x49')+_0x528794[_0x2257('0x61')][_0x2257('0x20')]()+_0x2257('0x56')+_0x44ff39+_0x2257('0x1c'),'user':game['userId'],'type':0x4,'whisper':game[_0x2257('0x3c')][_0x2257('0xd')][_0x2257('0x5c')](_0x38ce9d=>_0x38ce9d[_0x2257('0x38')])[_0x2257('0x3b')](_0x407b8d=>_0x407b8d['id'])});});}static[_0x2257('0x28')](){$(document[_0x2257('0x1e')])['on']('click','[data-plut-actor-delete]',async _0x87382f=>{const _0x428828=$(_0x87382f[_0x2257('0x46')])[_0x2257('0x9')](_0x2257('0x5a'));const _0x3caea6=Actor['collection'][_0x2257('0x16')](_0x428828);if(!_0x3caea6)return ui[_0x2257('0x4e')][_0x2257('0x4a')](_0x2257('0x3')+_0x428828+_0x2257('0x24'));await _0x3caea6['delete']();ui['notifications'][_0x2257('0x51')](_0x2257('0x1a')+_0x3caea6[_0x2257('0x61')]+'\x22');});}static async[_0x2257('0x58')](_0x331b98,_0x5b0562,_0x5edf6d,_0x1a210b){if(!game[_0x2257('0x26')][_0x2257('0x38')]){const _0x51894e=[game['user'][_0x2257('0x54')](_0x2257('0xf'))?'':_0x2257('0x5e'),game[_0x2257('0x26')][_0x2257('0x54')](_0x2257('0x13'))?'':_0x2257('0x2e'),game[_0x2257('0x3d')][_0x2257('0x16')](_0x2257('0x34'),'allowPolymorphing')?'':_0x2257('0x48')]['filter'](Boolean);if(_0x51894e[_0x2257('0x17')])return ui[_0x2257('0x4e')][_0x2257('0x4a')](_0x2257('0x41')+_0x51894e[_0x2257('0x35')](';\x20'));}const _0x49c15e=new ActorPolymorpher(_0x5b0562[_0x2257('0x59')]);const _0x211255=await _0x49c15e[_0x2257('0x27')]();if(_0x211255==null)return;_0x49c15e[_0x2257('0xa')]=_0x211255;_0x49c15e[_0x2257('0x4d')](!![]);}constructor(_0x26c5a7){const _0x535278=_0x2e5c1b=>{const _0x3134ac={};_0x2e5c1b[_0x2257('0x47')]('input')[_0x2257('0x2d')]((_0x15b0fa,_0x41cb37)=>{_0x3134ac[_0x41cb37[_0x2257('0x61')]]=_0x41cb37['checked'];});const _0x39dc49=mergeObject(game[_0x2257('0x3d')][_0x2257('0x16')](_0x2257('0x34'),_0x2257('0x40'))||{},_0x3134ac);game['settings'][_0x2257('0xb')](_0x2257('0x34'),_0x2257('0x40'),_0x39dc49);return _0x39dc49;};super({'title':game['i18n'][_0x2257('0x65')](_0x2257('0xe')),'content':{'options':game[_0x2257('0x3d')]['get'](_0x2257('0x34'),'polymorphSettings'),'i18n':{'keepPhysical':game[_0x2257('0x2a')][_0x2257('0x65')]('DND5E.PolymorphKeepPhysical'),'keepMental':game['i18n'][_0x2257('0x65')]('DND5E.PolymorphKeepMental'),'keepSaves':game[_0x2257('0x2a')]['localize'](_0x2257('0x23')),'keepSkills':game[_0x2257('0x2a')][_0x2257('0x65')](_0x2257('0x30')),'mergeSaves':game[_0x2257('0x2a')]['localize'](_0x2257('0x63')),'mergeSkills':game[_0x2257('0x2a')]['localize']('DND5E.PolymorphMergeSkills'),'keepClass':game[_0x2257('0x2a')][_0x2257('0x65')](_0x2257('0x8')),'keepFeats':game[_0x2257('0x2a')][_0x2257('0x65')]('DND5E.PolymorphKeepFeats'),'keepSpells':game[_0x2257('0x2a')][_0x2257('0x65')]('DND5E.PolymorphKeepSpells'),'keepItems':game['i18n'][_0x2257('0x65')](_0x2257('0x55')),'keepBio':game[_0x2257('0x2a')][_0x2257('0x65')](_0x2257('0x6')),'keepVision':game['i18n'][_0x2257('0x65')](_0x2257('0x1'))},'isToken':_0x26c5a7[_0x2257('0x5f')]},'default':_0x2257('0x43'),'buttons':{'accept':{'icon':_0x2257('0x12'),'label':game[_0x2257('0x2a')][_0x2257('0x65')](_0x2257('0x4f')),'callback':_0x5988a6=>this[_0x2257('0x1d')][_0x2257('0x3e')](this[_0x2257('0x57')],_0x535278(_0x5988a6))},'wildshape':{'icon':_0x2257('0x18'),'label':game[_0x2257('0x2a')][_0x2257('0x65')]('DND5E.PolymorphWildShape'),'callback':_0x211430=>this['_actor'][_0x2257('0x3e')](this['_sourceActor'],{'keepMental':!![],'mergeSaves':!![],'mergeSkills':!![],'transformTokens':_0x535278(_0x211430)['transformTokens']})},'polymorph':{'icon':_0x2257('0x60'),'label':game['i18n'][_0x2257('0x65')](_0x2257('0x29')),'callback':_0x14fe2b=>this['_actor'][_0x2257('0x3e')](this[_0x2257('0x57')],{'transformTokens':_0x535278(_0x14fe2b)['transformTokens']})},'cancel':{'icon':_0x2257('0x4c'),'label':game[_0x2257('0x2a')][_0x2257('0x65')](_0x2257('0x19'))}}},{'classes':[_0x2257('0x22'),_0x2257('0x34')],'width':0x258,'template':_0x2257('0x1b')});this[_0x2257('0x1d')]=_0x26c5a7;this['_sourceActor']=null;}set[_0x2257('0xa')](_0x3a9614){this[_0x2257('0x57')]=_0x3a9614;}async['pGetSourceActor'](){let _0x3a7d39=new ActorPolymorpher[(_0x2257('0x42'))]({});await _0x3a7d39['pInit']();let _0x2412d=null;let _0x25b049=null;const _0x42ea43=new Promise((_0x2b55df,_0x4b7c0a)=>{_0x2412d=_0x2b55df;_0x25b049=_0x4b7c0a;});const _0x51cd5a=new ChooseImporter(null,{'mode':{'id':_0x2257('0x44'),'name':_0x2257('0x2c'),'singleName':_0x2257('0x36'),'importerInstance':_0x3a7d39},'namespace':'actorPolymorpher','isAlwaysCloseWindow':!![],'isTemp':!![],'importerPreRenderArgs':[{'fnResolve':_0x2412d,'fnReject':_0x25b049,'pCreature':_0x42ea43}]});_0x51cd5a[_0x2257('0x4d')](!![]);return _0x42ea43;}}ActorPolymorpher['ImportList']=class extends ImportListCreature{constructor(..._0x1a2ea2){super(..._0x1a2ea2);this[_0x2257('0x2')]=!![];}[_0x2257('0x5d')](){const _0x8b33aa=super['getData']();_0x8b33aa['isRadio']=!![];return _0x8b33aa;}[_0x2257('0x4b')](){const _0x53ec17=super[_0x2257('0x4b')]();_0x53ec17[_0x2257('0x5b')]=_0x408e3e=>UtilList2['absorbFnBindListenersRadio'](this[_0x2257('0x11')],_0x408e3e);return _0x53ec17;}['_activateListeners_initRunButton'](){this[_0x2257('0x2b')][_0x2257('0x64')](async()=>{if(!this[_0x2257('0x11')])return;try{const _0x33f1e5=this[_0x2257('0x11')]['items'][_0x2257('0x47')](_0x492008=>_0x492008['data']['cbSel'][_0x2257('0x7')]);if(!_0x33f1e5)return ui[_0x2257('0x4e')][_0x2257('0x4a')]('Please\x20select\x20something\x20to\x20polymorph\x20into!');this[_0x2257('0x2')]=![];this[_0x2257('0x5')]();let _0x4df20a=[this[_0x2257('0x50')][_0x33f1e5['ix']]];if(this['_pFnPostProcessEntries'])_0x4df20a=await this[_0x2257('0x0')](_0x4df20a);if(_0x4df20a==null)return;const _0x2f2f1a=await this['pImportEntry'](_0x4df20a[0x0],{'isTemp':!![]});this[_0x2257('0x3f')](_0x2f2f1a);_0x33f1e5[_0x2257('0x3a')][_0x2257('0x45')][_0x2257('0xc')]=![];_0x33f1e5[_0x2257('0x4')][_0x2257('0x66')][_0x2257('0x15')](_0x2257('0x1f'));}catch(_0x4a8344){this[_0x2257('0x2f')](_0x4a8344);}});}[_0x2257('0x5')](..._0xf36000){super[_0x2257('0x5')](..._0xf36000);if(this[_0x2257('0x2')])this['_fnResolve'](null);}[_0x2257('0x52')](..._0x5d4208){const {fnResolve,fnReject,pCreature}=_0x5d4208[0x0];this[_0x2257('0x2')]=!![];this[_0x2257('0x3f')]=fnResolve;this[_0x2257('0x2f')]=fnReject;this[_0x2257('0x32')]=pCreature;}};export{ActorPolymorpher};