const _0x3c37=['italic','fnGetPromise','_$dispProgress','Failed\x20to\x20import\x20','depth','length','map','keys','\x22\x20failed','addClass','_element','isAddTrailingSlash','titleInitial','windows','<i\x20class=\x22fas\x20','_fnGetRowErrorText','title','max','_tasks','min','_maxZ','data','TaskRunner','reverse','confirmText','_isForceClose','name','Importing\x20','<i\x20class=\x22fas\x20fa-times\x22></i>','findIndex','MODULE_LOCATION','yes','parent','_$btnCancel','_fnGetRowRunningText','pDelay','_isCancelled','$pGetAddAppLoadingOverlay','render','pGetConfirmation','fnGetRowSuccessText','folder','pRun','css','_$wrpConsole','Critical\x20failure!\x20','getFolderPath','dismissText','prependTo','sort','.window-header\x20.window-title','filter','\x22></i>','TaskRunner\x20died!','_fnGetRowSuccessText','isForceClose','Close','</div>','notifications','activateListeners','STR_SEE_CONSOLE','<div\x20class=\x22italic\x22>','content','text','click','Cancel','[name=\x22btn-cancel\x22]','<div\x20class=\x22veapp-loading__wrp-outer\x22><i>Loading...</i></div>','Task\x20\x22','close','/template/TaskRunner.handlebars','bringToFront','getFolderList','_getHeaderButtons','error','removeClass','type','$setBarProgress','fnGetRowRunningText','entities','_titleCompelte','find'];(function(_0x3c5493,_0x3c3724){const _0x42307f=function(_0x15a31f){while(--_0x15a31f){_0x3c5493['push'](_0x3c5493['shift']());}};_0x42307f(++_0x3c3724);}(_0x3c37,0x161));const _0x4230=function(_0x3c5493,_0x3c3724){_0x3c5493=_0x3c5493-0x0;let _0x42307f=_0x3c37[_0x3c5493];return _0x42307f;};'use strict';import{LGT}from'./Util.js';import{SharedConsts}from'../shared/SharedConsts.js';class UtilApplications{static async[_0x4230('0xc')](_0x3067c9){_0x3067c9[_0x4230('0x12')]('position','relative');const _0x2193f1=$(_0x4230('0x2a'))['focus']()['appendTo'](_0x3067c9);await MiscUtil['pDelay'](0x5);return _0x2193f1;}static[_0x4230('0xe')](_0x281c84){_0x281c84=_0x281c84||{};return new Promise(_0x2c11d5=>{new Dialog({'title':_0x281c84[_0x4230('0x49')],'content':_0x281c84[_0x4230('0x25')],'buttons':{'yes':{'icon':_0x4230('0x47')+_0x281c84['faIcon']+_0x4230('0x1b'),'label':_0x281c84[_0x4230('0x51')],'callback':()=>_0x2c11d5(!![])},'no':{'icon':_0x4230('0x3'),'label':_0x281c84[_0x4230('0x16')]||_0x4230('0x28'),'callback':()=>_0x2c11d5(![])}},'default':_0x4230('0x6')})['render'](!![]);});}static['getCleanEntityName'](_0x3b5bee){return _0x3b5bee||'\x20';}static[_0x4230('0x15')](_0x26f0db,_0x4c8bb5){_0x4c8bb5=_0x4c8bb5||{};const _0x42b432=[];if(_0x26f0db['folder']){_0x42b432['push'](_0x26f0db[_0x4230('0x10')][_0x4230('0x4e')][_0x4230('0x1')]);let _0xd0accf=_0x26f0db[_0x4230('0x10')][_0x4230('0x7')];while(_0xd0accf&&_0xd0accf['id']){_0x42b432['push'](_0xd0accf[_0x4230('0x4e')][_0x4230('0x1')]);_0xd0accf=_0xd0accf[_0x4230('0x7')];}}const _0x5a18c8=_0x42b432[_0x4230('0x50')]()['join']('/');if(_0x5a18c8)return _0x4c8bb5[_0x4230('0x44')]?_0x5a18c8+'/':_0x5a18c8;return null;}static['$setBarProgress'](_0x5786bb,_0x2c4006){_0x2c4006=Math[_0x4230('0x4a')](0x0,Math[_0x4230('0x4c')](_0x2c4006,0x1));_0x5786bb[_0x4230('0x12')]({'width':Math['round'](_0x2c4006*0x64)+'%'});}static async['pRunTasks'](_0x4e03ad,_0x50dec1){_0x50dec1=_0x50dec1||[];const _0x2d102e=new UtilApplications['TaskRunner'](_0x4e03ad,_0x50dec1);_0x2d102e[_0x4230('0xd')](!![]);await _0x2d102e[_0x4230('0x11')]();}static[_0x4230('0x2f')](_0x3a2472){const _0x1d322e=(_0x348bcf,_0x43a817)=>SortUtil['ascSort'](_0x348bcf['data'][_0x4230('0x18')],_0x43a817[_0x4230('0x4e')][_0x4230('0x18')]);const _0x3c1e95=Folder['collection'][_0x4230('0x36')]['filter'](_0x10095e=>_0x10095e['data'][_0x4230('0x33')]===_0x3a2472)[_0x4230('0x18')](_0x1d322e);if(!_0x3c1e95[_0x4230('0x3e')])return _0x3c1e95;const _0x5466a4=Math['max'](..._0x3c1e95[_0x4230('0x3f')](_0x4e4b4e=>_0x4e4b4e[_0x4230('0x3d')]));const _0x518629=_0x3c1e95[_0x4230('0x1a')](_0x5cabe9=>_0x5cabe9[_0x4230('0x3d')]===0x1);if(_0x518629['length']===_0x3c1e95[_0x4230('0x3e')])return _0x518629;for(let _0x23b3c0=0x2;_0x23b3c0<_0x5466a4+0x1;++_0x23b3c0){const _0x18d84d=_0x3c1e95[_0x4230('0x1a')](_0x2154d1=>_0x2154d1[_0x4230('0x3d')]===_0x23b3c0)['sort'](_0x1d322e)[_0x4230('0x50')]();_0x18d84d['forEach'](_0x69b7e1=>{const _0x5d49fd=_0x518629[_0x4230('0x4')](_0x564e36=>_0x564e36['id']===_0x69b7e1['parent']['id']);if(~_0x5d49fd)_0x518629['splice'](_0x5d49fd+0x1,0x0,_0x69b7e1);});}return _0x518629;}static[_0x4230('0x2e')](_0x261930){if(typeof _maxZ==='undefined')window[_0x4230('0x4d')]=0x64;if(Object[_0x4230('0x40')](ui[_0x4230('0x46')])[_0x4230('0x3e')]===0x0)_maxZ=0x64;_0x261930[_0x4230('0x43')][_0x4230('0x12')]({'zIndex':Math[_0x4230('0x4c')](++_maxZ,0x270f)});}}UtilApplications[_0x4230('0x4f')]=class extends Application{constructor(_0x219857,_0x1faa7a){_0x1faa7a=_0x1faa7a||{};super({'title':_0x1faa7a[_0x4230('0x45')]||'Importing...','width':0x1e0,'template':SharedConsts[_0x4230('0x5')]+_0x4230('0x2d'),'height':0x140,'resizable':!![]});this[_0x4230('0x4b')]=_0x219857;this[_0x4230('0x37')]=_0x1faa7a['titleComplete']||'Import\x20Complete';this[_0x4230('0x9')]=_0x1faa7a[_0x4230('0x35')]||(_0x12d9c4=>_0x4230('0x2')+_0x12d9c4+'...');this[_0x4230('0x1d')]=_0x1faa7a[_0x4230('0xf')]||(_0x34d5e9=>'Imported\x20'+_0x34d5e9+'.');this[_0x4230('0x48')]=_0x1faa7a['fnGetRowErrorText']||(_0x529c31=>_0x4230('0x3c')+_0x529c31+'!\x20'+VeCt[_0x4230('0x23')]);this['_isForceClose']=!!_0x1faa7a[_0x4230('0x1e')];this[_0x4230('0xb')]=![];this[_0x4230('0x3b')]=null;this['_$wrpConsole']=null;this['_$btnCancel']=null;}[_0x4230('0x22')](_0x5ecba6){super[_0x4230('0x22')](_0x5ecba6);this['_$dispProgress']=_0x5ecba6[_0x4230('0x38')]('[data-name=\x22disp-progress\x22]');this[_0x4230('0x13')]=_0x5ecba6[_0x4230('0x38')]('[data-name=\x22wrp-console\x22]');this[_0x4230('0x8')]=_0x5ecba6[_0x4230('0x38')](_0x4230('0x29'))[_0x4230('0x27')](()=>this['_isCancelled']=!![]);}async[_0x4230('0x11')](){while(this['_$btnCancel']==null)await MiscUtil[_0x4230('0xa')](0x19);try{const _0x462004=this['_tasks'][_0x4230('0x3e')];for(let _0x224a81=0x0;_0x224a81<_0x462004;++_0x224a81){const _0x41711b=this['_tasks'][_0x224a81];if(this[_0x4230('0xb')])break;const _0x48acaf=$(_0x4230('0x24')+this['_fnGetRowRunningText'](_0x41711b[_0x4230('0x1')])+_0x4230('0x20'));$$`<div class="mx-1 row split imp__task-row flex-v-center">${_0x48acaf}<div>(${_0x224a81+0x1}/${_0x462004})</div></div>`[_0x4230('0x17')](this[_0x4230('0x13')]);try{await _0x41711b[_0x4230('0x3a')]();_0x48acaf['text'](this[_0x4230('0x1d')](_0x41711b[_0x4230('0x1')]));}catch(_0x5678b4){_0x48acaf[_0x4230('0x42')]('imp__msg-error')[_0x4230('0x32')](_0x4230('0x39'))[_0x4230('0x26')](this[_0x4230('0x48')](_0x41711b[_0x4230('0x1')]));console[_0x4230('0x31')](...LGT,_0x4230('0x2b')+_0x41711b[_0x4230('0x1')]+_0x4230('0x41'),_0x5678b4);}UtilApplications[_0x4230('0x34')](this['_$dispProgress'],(_0x224a81+0x1)/_0x462004);}UtilApplications['$setBarProgress'](this['_$dispProgress'],0x1);if(this[_0x4230('0x0')])this[_0x4230('0x2c')]();else this['element'][_0x4230('0x38')](_0x4230('0x19'))[_0x4230('0x26')](this[_0x4230('0x37')]);}catch(_0x2c8900){console['error'](...LGT,_0x4230('0x1c'),_0x2c8900);ui[_0x4230('0x21')][_0x4230('0x31')](_0x4230('0x14')+VeCt[_0x4230('0x23')]);}this['_$btnCancel']['off'](_0x4230('0x27'))[_0x4230('0x26')](_0x4230('0x1f'))[_0x4230('0x27')](()=>this['close']());}[_0x4230('0x30')](){return[];}};export{UtilApplications};