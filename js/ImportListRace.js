const _0x2077=['Select\x20Ability\x20Score\x20Set','adoptSubraces','custom','_pImportEntry_pGetFolderId','push','DataSourceSpecial','isTemp','pFillActorSkillData','abilities','weighted','5etools','powerfulBuild','Importing\x20race\x20\x22','Upload\x20File','source','traits','_pImportEntry_pFillSkills','Races','details','\x20Ability\x20Score','flags','Custom\x20URL','_list','casterLevel','map','data','stringify','pFillActorToolData','Name','Lucky','getItemActorPassive','sizeAbvToFull','pGetUserEnum','attributes','render','isCancelled','_pImportEntry_fillAttributes','_pImportEntry_pFillAbilities','name','abilityAbv','getAbilityData','keys','isToken','_pPostLoad','_pack','importEntity','size','update','SOURCE_TYP_CUSTOM','_pImportEntry_pFillItems','sourceJsonToFull','dnd5e','ability','senses','choose','halflingLucky','Halfling','_pImportEntry_fillFlags','length','_pageFilter','toolProf','feat','split','asTextShort','\x20to\x20Increase\x20by\x20','warn','_pImportEntry_pImportToItems','_pImportEntry_pImportToActor','link','DataSourceUrl','pGetRaces','addHook','_activateListeners_absorbListItems','\x22\x20(from\x20\x22','mergeSubraces','get','items','amount','subrace','isStreamerMode','/media/icon/mighty-force.svg','sheet','savageAttacks','_vSize','count','entries','SOURCE_TYP_OFFICIAL_ALL','Ability','forEach','_pImportEntry_fillTraits','modules/','Source','asText','numberToText','languageProficiencies','None','mutateForFilters','skillProficiencies','bind','skills','_actor','5etools-races','isRadio','notifications','pGetSources','MODULE_NAME','getData','log','traitTags','_content','_vAbility','pGetHomebrewSources','from','_baseName','absorbFnBindListeners','create','races','race','Size','SRD','absorbFnGetData','darkvision','Superior\x20Darkvision','toolProficiencies','speed','getRaceItem','text-center','Darkvision','some','value'];(function(_0x561679,_0x207762){const _0xa39067=function(_0x5dcb56){while(--_0x5dcb56){_0x561679['push'](_0x561679['shift']());}};_0xa39067(++_0x207762);}(_0x2077,0x1cd));const _0xa390=function(_0x561679,_0x207762){_0x561679=_0x561679-0x0;let _0xa39067=_0x2077[_0x561679];return _0xa39067;};import{ImportList}from'./ImportList.js';import{LGT}from'./Util.js';import{Vetools}from'./Vetools.js';import{UtilActors}from'./UtilActors.js';import{DataConverter}from'./DataConverter.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';class ImportListRace extends ImportList{constructor(_0x3d8c67){_0x3d8c67=_0x3d8c67||{};super({'title':'Import\x20Races'},_0x3d8c67,{'props':['race'],'searchTitle':_0xa390('0x2d'),'sidebarTab':_0xa390('0x5'),'gameProp':_0xa390('0x5'),'defaultFolderPath':[_0xa390('0x4c')],'folderType':'Item','pageFilter':new PageFilterRaces(),'isActorRadio':!![]});}async['_pPostLoad'](_0x19bb24,_0x462107){const _0x2dfaa0=[];if(_0x462107[_0xa390('0x2e')])_0x2dfaa0[_0xa390('0x3f')](...Renderer[_0xa390('0x2e')][_0xa390('0x3')](_0x462107['race'],{'isAddBaseRaces':!![]}));if(_0x462107[_0xa390('0x7')]){const _0x4f00c2=(await Vetools['pGetRaces']({'isAddBaseRaces':!![]}))[_0xa390('0x2e')];_0x4f00c2[_0xa390('0x11')](_0xfee387=>this[_0xa390('0x76')][_0xa390('0x19')](_0xfee387));const _0x412fc6=Renderer[_0xa390('0x2e')][_0xa390('0x3c')](_0x4f00c2,_0x462107[_0xa390('0x7')]);const _0x10abb5=Renderer[_0xa390('0x2e')]['mergeSubraces'](_0x412fc6);_0x2dfaa0['push'](..._0x10abb5);}return _0x2dfaa0;}async[_0xa390('0x21')](){const _0x21fd10={'pPostLoad':this[_0xa390('0x66')][_0xa390('0x1b')](this)};return[new ImportList[(_0xa390('0x40'))](Config[_0xa390('0x4')]('ui',_0xa390('0x8'))?_0xa390('0x30'):_0xa390('0x45'),async()=>(await Vetools[_0xa390('0x81')]())['race'],{'cacheKey':_0xa390('0x1e'),'filterTypes':[ImportList[_0xa390('0xf')]]}),new ImportList[(_0xa390('0x80'))](_0xa390('0x50'),'',{..._0x21fd10,'filterTypes':[ImportList[_0xa390('0x6b')]]}),new ImportList['DataSourceFile'](_0xa390('0x48'),{..._0x21fd10,'filterTypes':[ImportList['SOURCE_TYP_CUSTOM']]}),...(await Vetools[_0xa390('0x28')](_0xa390('0x2e'),_0xa390('0x7')))[_0xa390('0x53')](({name,url})=>new ImportList['DataSourceUrl'](name,url,{..._0x21fd10,'filterTypes':[ImportList['SOURCE_TYP_BREW']]}))];}[_0xa390('0x23')](){const _0x4f7ad8={...super[_0xa390('0x23')](),'cols':[{'name':_0xa390('0x57'),'width':0x4,'field':_0xa390('0x61')},{'name':_0xa390('0x10'),'width':0x5,'field':_0xa390('0x6f')},{'name':'Size','width':0x1,'field':'size'},{'name':_0xa390('0x14'),'width':0x1,'field':'source','titleProp':'sourceLong','displayProp':'sourceShort','rowClassName':_0xa390('0x37')}],'rows':this[_0xa390('0x26')][_0xa390('0x53')]((_0x2186b6,_0x375776)=>{this['_pageFilter'][_0xa390('0x19')](_0x2186b6);_0x2186b6[_0xa390('0x27')]=_0x2186b6[_0xa390('0x6f')]?Renderer[_0xa390('0x63')](_0x2186b6['ability'])[_0xa390('0x7a')]:_0xa390('0x18');_0x2186b6[_0xa390('0xc')]=Parser[_0xa390('0x5a')](_0x2186b6[_0xa390('0x69')]||SZ_VARIES);return{'name':_0x2186b6[_0xa390('0x61')],'ability':_0x2186b6[_0xa390('0x27')],'size':_0x2186b6[_0xa390('0xc')],'source':_0x2186b6[_0xa390('0x49')],'sourceShort':Parser['sourceJsonToAbv'](_0x2186b6[_0xa390('0x49')]),'sourceLong':Parser[_0xa390('0x6d')](_0x2186b6['source']),'ix':_0x375776};})};if(this['_actor']){_0x4f7ad8[_0xa390('0x1f')]=!![];}return _0x4f7ad8;}[_0xa390('0x1')](){this[_0xa390('0x51')]['doAbsorbItems'](this[_0xa390('0x26')],{'fnGetName':_0x1cfe23=>_0x1cfe23['name'],'fnGetValues':_0x3e8fff=>({'source':_0x3e8fff[_0xa390('0x49')],'ability':_0x3e8fff[_0xa390('0x27')],'size':_0x3e8fff['_vSize']}),'fnGetData':UtilList2[_0xa390('0x31')],'fnBindListeners':_0x33b633=>this[_0xa390('0x1d')]?UtilList2['absorbFnBindListenersRadio'](this[_0xa390('0x51')],_0x33b633):UtilList2[_0xa390('0x2b')](this[_0xa390('0x51')],_0x33b633)});}async['pImportEntry'](_0x1d9f67,_0x5b9d0f){_0x5b9d0f=_0x5b9d0f||{};console[_0xa390('0x24')](...LGT,_0xa390('0x47')+_0x1d9f67[_0xa390('0x61')]+_0xa390('0x2')+Parser['sourceJsonToAbv'](_0x1d9f67[_0xa390('0x49')])+'\x22)');if(_0x5b9d0f[_0xa390('0x41')])return this[_0xa390('0x7d')](_0x1d9f67,_0x5b9d0f);else if(this['_actor'])return this[_0xa390('0x7e')](_0x1d9f67,_0x5b9d0f);else return this[_0xa390('0x7d')](_0x1d9f67,_0x5b9d0f);}async['_pImportEntry_pImportToActor'](_0x5f300f,_0x30338a){const _0x4e2423={'data':{'details':{'race':_0x5f300f[_0xa390('0x61')]}}};const _0x5efcae=MiscUtil[_0xa390('0x4')](this['_actor'],_0xa390('0x54'),_0xa390('0x54'),_0xa390('0x4d'),'level','value')||0x1;const _0x7e3e89={'pb':Math['floor']((_0x5efcae-0x1)/0x4)+0x2,'isCancelled':![]};this[_0xa390('0x74')](_0x5f300f,_0x4e2423,_0x7e3e89);await this[_0xa390('0x60')](_0x5f300f,_0x4e2423[_0xa390('0x54')],_0x7e3e89);if(_0x7e3e89[_0xa390('0x5e')])return;this['_pImportEntry_fillAttributes'](_0x5f300f,_0x4e2423['data'],_0x7e3e89);await this[_0xa390('0x4b')](_0x5f300f,_0x4e2423[_0xa390('0x54')],_0x7e3e89);if(_0x7e3e89[_0xa390('0x5e')])return;await this[_0xa390('0x12')](_0x5f300f,_0x4e2423['data'],_0x7e3e89);if(_0x7e3e89['isCancelled'])return;await this[_0xa390('0x6c')](_0x5f300f,_0x4e2423,_0x7e3e89);this[_0xa390('0x1d')][_0xa390('0x6a')](_0x4e2423);if(this[_0xa390('0x1d')][_0xa390('0x65')])this[_0xa390('0x1d')][_0xa390('0xa')][_0xa390('0x5d')]();return{'name':_0x5f300f[_0xa390('0x61')],'actor':this[_0xa390('0x1d')]};}async[_0xa390('0x7d')](_0xbaccc9,_0x59898d){const _0xeea239=DataConverter[_0xa390('0x36')](_0xbaccc9,{'isAddPermission':!![]});if(_0x59898d[_0xa390('0x41')]||!this[_0xa390('0x67')]){if(!_0x59898d[_0xa390('0x41')]){const _0x55e95c=await this[_0xa390('0x3e')](_0xbaccc9);if(_0x55e95c)_0xeea239['folder']=_0x55e95c;}const _0x193bf4=await Item[_0xa390('0x2c')](_0xeea239,{'renderSheet':!!_0x59898d[_0xa390('0x41')],'temporary':!!_0x59898d['isTemp']});if(!_0x59898d[_0xa390('0x41')])await game[_0xa390('0x5')]['insert'](_0x193bf4);return _0x193bf4;}else{const _0x38222a=new Item(_0xeea239);await this[_0xa390('0x67')][_0xa390('0x68')](_0x38222a);return _0x38222a;}}[_0xa390('0x74')](_0x2c09b2,_0x5158b8,_0x2e46e6){const _0x4c77f3={};const _0x145c37={};const _0x9b7d28=_0x2c09b2[_0xa390('0x25')]&&_0x2c09b2[_0xa390('0x25')]['includes']('Powerful\x20Build')||_0x2c09b2['entries'][_0xa390('0x39')](_0x3d9d9b=>_0x3d9d9b[_0xa390('0x61')]==='Powerful\x20Build');if(_0x9b7d28)_0x145c37[_0xa390('0x46')]=!![];if(_0x2c09b2[_0xa390('0xe')][_0xa390('0x39')](_0x440897=>_0x440897[_0xa390('0x61')]==='Savage\x20Attacks'))_0x145c37[_0xa390('0xb')]=!![];if(_0x2c09b2[_0xa390('0xe')][_0xa390('0x39')](_0x4c3b2e=>_0x4c3b2e[_0xa390('0x61')]===_0xa390('0x58'))&&_0x2c09b2[_0xa390('0x2a')]===_0xa390('0x73'))_0x145c37[_0xa390('0x72')]=!![];if(Object[_0xa390('0x64')](_0x145c37)['length'])_0x4c77f3[_0xa390('0x6e')]=_0x145c37;if(Object[_0xa390('0x64')](_0x4c77f3)[_0xa390('0x75')])_0x5158b8[_0xa390('0x4f')]=_0x4c77f3;}async[_0xa390('0x60')](_0x4949a9,_0x2ee403,_0x5c2713){if(!_0x4949a9[_0xa390('0x6f')])return;const _0x351a12=_0x4949a9[_0xa390('0x6f')][_0xa390('0x75')]>0x1?await InputUiUtil[_0xa390('0x5b')]({'values':_0x4949a9['ability'],'placeholder':_0xa390('0x3b'),'title':'Select\x20Ability\x20Score\x20Set','fnDisplay':_0x161a42=>Renderer['getAbilityData']([_0x161a42])[_0xa390('0x15')],'isResolveItem':!![]}):_0x4949a9[_0xa390('0x6f')][0x0];if(!_0x351a12)return _0x5c2713[_0xa390('0x5e')]=!![];const _0x43cd18={};Parser['ABIL_ABVS'][_0xa390('0x11')](_0x44ad45=>{if(_0x351a12[_0x44ad45])_0x43cd18[_0x44ad45]=_0x351a12[_0x44ad45];});if(_0x351a12[_0xa390('0x71')]){const _0x521df2=_0x351a12[_0xa390('0x71')];if(_0x521df2[_0xa390('0x29')]){const _0x308847=_0x521df2[_0xa390('0xd')]||0x1;const _0x5a5c91=await InputUiUtil['pGetUserMultipleChoice']({'title':'Choose\x20'+Parser[_0xa390('0x16')](_0x308847)+_0xa390('0x4e')+(_0x308847===0x1?'':'s')+_0xa390('0x7b')+(_0x521df2[_0xa390('0x6')]||0x1),'values':_0x521df2['from'],'count':_0x308847,'isResolveItems':!![],'fnDisplay':_0x265765=>Parser['attAbvToFull'](_0x265765)});if(!_0x5a5c91)return _0x5c2713[_0xa390('0x5e')]=!![];_0x5a5c91[_0xa390('0x11')](_0x45179b=>_0x43cd18[_0x45179b]=(_0x43cd18[_0x45179b]||0x0)+_0x521df2[_0xa390('0x6')]||0x1);}else if(_0x521df2[_0xa390('0x44')]){ui[_0xa390('0x20')][_0xa390('0x7c')]('This\x20importer\x20does\x20not\x20yet\x20support\x20\x22weighted\x22-type\x20ability\x20scores.\x20Check\x20back\x20later!');}}if(Object['keys'](_0x43cd18)[_0xa390('0x75')])_0x2ee403[_0xa390('0x43')]={};Object['entries'](_0x43cd18)[_0xa390('0x11')](([_0x19a1c1,_0x156b19])=>{_0x2ee403[_0xa390('0x43')][_0x19a1c1]={'value':UtilActors['getAbilityScore'](this[_0xa390('0x1d')],_0x19a1c1)+_0x156b19};});}[_0xa390('0x5f')](_0x1aa944,_0x29d619,_0xac416c){const _0x54c31c={};if(_0x1aa944['speed']){const _0x5e2d30=Parser['getSpeedString'](_0x1aa944);const [_0x3c95e6,..._0x172ba4]=_0x5e2d30[_0xa390('0x79')](',\x20');_0x54c31c[_0xa390('0x35')]={'value':_0x3c95e6,'special':_0x172ba4['join'](',\x20')};}_0x29d619[_0xa390('0x5c')]=_0x54c31c;}async[_0xa390('0x4b')](_0x167757,_0x445b27,_0x367acc){const _0x1d73db=await DataConverter[_0xa390('0x42')](MiscUtil[_0xa390('0x4')](this[_0xa390('0x1d')],_0xa390('0x54'),_0xa390('0x54'),_0xa390('0x1c')),_0x167757[_0xa390('0x1a')],_0x445b27);if(_0x1d73db[_0xa390('0x5e')])_0x367acc[_0xa390('0x5e')]=!![];}async['_pImportEntry_fillTraits'](_0x1a5c3f,_0x47ad76,_0x40af0d){const _0x422173={};_0x422173['size']=UtilActors['VET_SIZE_TO_ABV'][_0x1a5c3f[_0xa390('0x69')]]||'med';let _0x3344cb;if(_0x1a5c3f[_0xa390('0x32')]&&_0x1a5c3f['darkvision']<0x78)_0x3344cb=_0xa390('0x38');if(_0x1a5c3f[_0xa390('0x32')]&&_0x1a5c3f[_0xa390('0x32')]>=0x78)_0x3344cb=_0xa390('0x33');if(_0x3344cb)_0x422173[_0xa390('0x70')]=_0x3344cb;_0x47ad76[_0xa390('0x4a')]=_0x422173;_0x40af0d[_0xa390('0x5e')]=await DataConverter['pFillActorLanguageData'](MiscUtil['get'](this['_actor'],'data',_0xa390('0x54'),_0xa390('0x4a'),'languages',_0xa390('0x3a')),MiscUtil[_0xa390('0x4')](this[_0xa390('0x1d')],'data',_0xa390('0x54'),_0xa390('0x4a'),'languages',_0xa390('0x3d')),_0x1a5c3f[_0xa390('0x17')],_0x47ad76);if(_0x40af0d[_0xa390('0x5e')])return;_0x40af0d['isCancelled']=await DataConverter[_0xa390('0x56')](MiscUtil['get'](this['_actor'],_0xa390('0x54'),_0xa390('0x54'),'traits',_0xa390('0x77'),_0xa390('0x3a')),MiscUtil[_0xa390('0x4')](this[_0xa390('0x1d')],_0xa390('0x54'),_0xa390('0x54'),_0xa390('0x4a'),'toolProf','custom'),_0x1a5c3f[_0xa390('0x34')],_0x47ad76);}async[_0xa390('0x6c')](_0x3fcf14,_0x401a13,_0x6ed428){_0x6ed428[_0xa390('0x5')]=[];const _0x3ca660=UtilActors['getActorSpellItemOpts'](this[_0xa390('0x1d')],Config[_0xa390('0x4')]('importSpell','prepareActorSpells'));const _0x1e9680=await DataConverter['pGetSpellHashToItemPosMapAndFillSpells'](this[_0xa390('0x1d')],JSON[_0xa390('0x55')](_0x3fcf14[_0xa390('0xe')]),{'optsGetSpellItem':{'casterLevel':_0x3ca660[_0xa390('0x52')],'abilityAbv':_0x3ca660[_0xa390('0x62')]}});const _0x8815c0=DataConverter['doHookSpellLinkRender']['bind'](null,this[_0xa390('0x1d')]['id'],_0x1e9680);Renderer[_0xa390('0x4')]()[_0xa390('0x0')](_0xa390('0x7f'),'ele',_0x8815c0);_0x3fcf14[_0xa390('0xe')][_0xa390('0x11')](_0x5ab517=>{if(_0x5ab517['name']===_0xa390('0x2f'))return;_0x6ed428[_0xa390('0x5')][_0xa390('0x3f')](DataConverter[_0xa390('0x59')](_0x5ab517,{'img':_0xa390('0x13')+SharedConsts[_0xa390('0x22')]+_0xa390('0x9'),'fvttType':_0xa390('0x78'),'source':_0x3fcf14[_0xa390('0x49')]}));});Renderer['get']()['removeHook']('link','ele',_0x8815c0);if(_0x6ed428[_0xa390('0x5')][_0xa390('0x75')])await UtilActors['pAddActorItems'](this[_0xa390('0x1d')],_0x6ed428[_0xa390('0x5')]);}}export{ImportListRace};