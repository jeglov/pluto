const _0x48db=['Source','items','toTitleCase','/media/icon/spell-book.svg','name','text-center','innate','substring','copy','flat','day','getSpeedString','stripTags','5etools','_DEFAULT_SAVING_THROW_DATA','_list','abilities','_getCasterClassFromEntry','_content','alignmentListToFull','save','getSourceWithPagePart','render','_pImportEntry_fillData_Abilities','getFolderPathMeta','spellcasting','pGetScaledEntries','tremorsense','getCleanEntityName','ele','add','some','log','_pImportEntry_pFillItems_pAction','_pImportEntry_pFillItems_lairActions','Type\x20(With\x20Tags)','getMetaGroup','mutateForFilters','click','Custom\x20URL','darkvision','VALID_LANGUAGES','pCacheAndGetHash','initBtnSortHandlers','_pImportEntry_fillData_Currency','npc','\x20+\x20@mod','truesight','_getDamageTuples','crToXpNumber','getMaxWindowHeight','weight','SOURCE_TYP_CUSTOM','_pImportEntry_fillData_Resources','searchTitle','getImageUrlFromFluff','charges','\x22\x20(from\x20\x22','monsterFluff','trim','pGetSpellHashToItemPosMapAndFillSpells','push','actors','size','variant','attuned','addHook','sourceJsonToFull','average','function','_monList','Type','uppercaseFirst','.veapp__list','get','_pImportEntry_pFillToken','actor','attributes','reset','spell','lair','slots','isTemp','class','img','[name=\x22ipt-rename\x22]','all','[name=\x22btn-run\x22]','data','find','alignment','constant','Legendary\x20Resistance','_activateListeners_absorbListItems','action','rsak','VALID_CONDITIONS','_pImportEntry_pFillItems_addTextOnlyItem','perm','pInit','wis','pGetTokenUrl','_pImportEntry_pFillItems_pAddWeapon','postProcessFluff','list','replace','_getCasterLevelFromEntry','insert','race','_pImportEntry_pFillItems_pSpellcasting','SOURCE_TYP_OFFICIAL_ALL','keys','monImmResToFull','ABIL_ABVS','str','pGetActionWeaponDetails','parse','isTemporary','join','doAbsorbItems','activationType','_pImportEntry_pFillItems_traitsReactionsLegendaries','filter','pGetCompendiumImage','_temp_details_class','max','npcIsAddVision','init','_getSavingThrowData','forEach','_getRenamedMon','traits','Upload\x20File','_pImportEntry_fillData_Attributes','importEntity','getEntryDescription','getData','5etools-creatures','Importing...','absorbFnGetData','pGetFluff','npcBar1Attribute','_pImportEntry_fillData_Spells','_pImportEntry_pFillItems','skillToAbilityAbv','Actor','split','isNonstandardSource','DataSourceSpecial','headerEntries','Unknown\x20CR','ascSortLower','details','_pImportEntry_pFillItems_pAddItem','importToken','pact','source','entries','PG_ITEMS','absorbFnBindListeners','create','formula','_pImportEntry_pFillItems_pActions','permission','MODULE_LOCATION','legendaryMeta','_displayName','string','_getDamageParts','getNameWithSourcePart','SOURCE_TYP_BREW','activateListeners','_pImportEntry_pFillBase','_getAbsorbListItemOpts','getAbilityModNumber','DataSourceUrl','toLowerCase','fluff','monster','reaction','senses','sourceLong','modules/','_resolve','setFirstSection','legendary','weapon','rest','feat','pGetAllCreatures','URL_TO_HASH_BUILDER','/media/icon/mighty-force.svg','crToPb','sort','conditionImmune','stringify','_pImportEntry_pFillItems_pInventory','SOURCE_TYP_OFFICIAL_SINGLE','creatures','/media/icon/mountain-cave.svg','_searchTitle','mwak','getSpellcastingRenderedTraits','getItemActorPassive','doHookSpellLinkRender','sourceJsonToAbv','assumedPb','immune','importCreature','monCrToFull','ScaleRename','map','[name=\x22btn-reset\x22]','includes','_vCr','monTypeToFullObj','identified','permissions','pImportEntry','[name=\x22sel-cr\x22]','close','from','exec','environment','_pTypes','blindsight','resources','ability','weekly','pGetCreatureIndex','msak','MODULE_NAME','bind','_pImportEntry_fillData_Details','type','_pImportEntry_pFillItems_pSpellcasting_recharge','skill','languages','/media/icon/mailed-fist.svg','pGetSources','group','rarity','biography','length','.search','VALID_DAMAGE_TYPES','_postLoadVetools','activationCost','update','Import\x20Creatures','alias','folder','dex','crToNumber','cha','prepared','trait','will','resist','_pImportEntry_fillData_Skills','SRD','_pImportEntry_fillData_Traits','item','token','lairActions','_pack','spells','prof','_$btnReset','speed','val','_pageFilter','sourceShort','npcBarDisplay','prop','spelldc','rendered','pGetHomebrewSources','asText'];(function(_0x347aee,_0x48dba5){const _0x26518e=function(_0x887722){while(--_0x887722){_0x347aee['push'](_0x347aee['shift']());}};_0x26518e(++_0x48dba5);}(_0x48db,0x140));const _0x2651=function(_0x347aee,_0x48dba5){_0x347aee=_0x347aee-0x0;let _0x26518e=_0x48db[_0x347aee];return _0x26518e;};'use strict';import{ImportList}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{Util,LGT}from'./Util.js';import{UtilActors}from'./UtilActors.js';import{UtilApplications}from'./UtilApplications.js';import{DataConverter}from'./DataConverter.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';class ImportListCreature extends ImportList{constructor(_0x40990c){_0x40990c=_0x40990c||{};super({'title':_0x2651('0xd0')},_0x40990c,{'props':['monster'],'searchTitle':_0x2651('0x9d'),'sidebarTab':_0x2651('0x15'),'gameProp':_0x2651('0x15'),'defaultFolderPath':['Creatures'],'folderType':_0x2651('0x68'),'pFnPostProcessEntries':ImportListCreature[_0x2651('0x108')]['bind'](ImportListCreature),'fnListSort':PageFilterBestiary['sortMonsters'],'pageFilter':new PageFilterBestiary(),'isActorRadio':!![]});}async[_0x2651('0x3a')](){await super[_0x2651('0x3a')]();}async[_0x2651('0xc6')](){const _0x244b50=await Vetools[_0x2651('0xbc')]();return[new ImportList[(_0x2651('0x6b'))](Config[_0x2651('0x21')]('ui','isStreamerMode')?_0x2651('0xdb'):_0x2651('0xfb'),async()=>(await Vetools[_0x2651('0x94')]())[_0x2651('0x89')],{'cacheKey':_0x2651('0x60'),'filterTypes':[ImportList[_0x2651('0x45')]]}),new ImportList[(_0x2651('0x86'))](_0x2651('0x115'),'',{'filterTypes':[ImportList[_0x2651('0xb')]]}),new ImportList['DataSourceFile'](_0x2651('0x5b'),{'filterTypes':[ImportList[_0x2651('0xb')]]}),...Object['entries'](_0x244b50)[_0x2651('0xaa')](([_0x58b0b0,_0x528187])=>new ImportList[(_0x2651('0x86'))](Parser[_0x2651('0x1a')](_0x58b0b0),Vetools['getCreatureUrl'](_0x528187),{'source':_0x58b0b0,'pPostLoad':ImportListCreature[_0x2651('0xcd')][_0x2651('0xbf')](ImportListCreature,_0x58b0b0),'filterTypes':SourceUtil[_0x2651('0x6a')](_0x58b0b0)?[ImportList['SOURCE_TYP_ARCANA']]:[ImportList[_0x2651('0x9c')]]})),...(await Vetools[_0x2651('0xec')]('creature'))['map'](({name,url})=>new ImportList['DataSourceUrl'](name,url,{'filterTypes':[ImportList[_0x2651('0x81')]]}))];}static[_0x2651('0xcd')](_0xed7e,_0x5245d9){return _0x5245d9['filter'](_0x51daff=>_0x51daff[_0x2651('0x73')]===_0xed7e);}[_0x2651('0x5f')](){return{...super[_0x2651('0x5f')](),'cols':[{'name':'Name','width':0x4,'field':_0x2651('0xf2')},{'name':'Type','width':0x5,'field':'type'},{'name':'CR','width':0x1,'field':'cr','rowClassName':_0x2651('0xf3')},{'name':_0x2651('0xee'),'width':0x1,'field':_0x2651('0x73'),'titleProp':_0x2651('0x8c'),'displayProp':_0x2651('0xe7'),'rowClassName':'text-center'}],'rows':this[_0x2651('0x100')][_0x2651('0xaa')]((_0x8435ed,_0x380100)=>{this[_0x2651('0xe6')][_0x2651('0x113')](_0x8435ed);_0x8435ed[_0x2651('0xad')]=_0x8435ed['_pCr']||'â€”';return{'name':_0x8435ed[_0x2651('0xf2')],'type':_0x8435ed[_0x2651('0xb7')]['asText'][_0x2651('0x1f')](),'cr':_0x8435ed[_0x2651('0xad')],'source':_0x8435ed['source'],'sourceShort':Parser[_0x2651('0xa4')](_0x8435ed[_0x2651('0x73')]),'sourceLong':Parser[_0x2651('0x1a')](_0x8435ed['source']),'ix':_0x380100};})};}[_0x2651('0x84')](){return{'fnGetName':_0x44d98d=>_0x44d98d[_0x2651('0xf2')],'fnGetValues':_0x399c74=>({'source':_0x399c74[_0x2651('0x73')],'type':_0x399c74['_pTypes']['asText'],'cr':_0x399c74[_0x2651('0xad')],'group':_0x399c74[_0x2651('0xc7')]||'','alias':(_0x399c74[_0x2651('0xd1')]||[])[_0x2651('0xaa')](_0x1ca8da=>'\x22'+_0x1ca8da+'\x22')[_0x2651('0x4d')](',')}),'fnGetData':UtilList2[_0x2651('0x62')],'fnBindListeners':_0x55d727=>UtilList2[_0x2651('0x76')](this[_0x2651('0xfd')],_0x55d727)};}[_0x2651('0x34')](){this[_0x2651('0xfd')][_0x2651('0x4e')](this[_0x2651('0x100')],this[_0x2651('0x84')]());}[_0x2651('0x106')](){return{...super[_0x2651('0x106')](),'cr':{'label':'Challenge\x20Rating','getter':_0x539ad0=>_0x539ad0['cr']?_0x539ad0['cr']['cr']||_0x539ad0['cr']:_0x2651('0x6d')},'type':{'label':_0x2651('0x1e'),'getter':_0x361f17=>Parser[_0x2651('0xae')](_0x361f17['type'])[_0x2651('0xc1')][_0x2651('0xf0')]()},'typeTags':{'label':_0x2651('0x111'),'getter':_0x948bad=>Parser[_0x2651('0xae')](_0x948bad['type'])[_0x2651('0xed')]['uppercaseFirst']()}};}static[_0x2651('0x108')](_0x424949){return new Promise(_0x375b07=>{const _0x33a9e9=new ImportListCreature[(_0x2651('0xa9'))](_0x424949,_0x375b07,{'searchTitle':this[_0x2651('0x9f')]});_0x33a9e9[_0x2651('0x104')](!![]);});}async[_0x2651('0xb1')](_0x42770f,_0x4d979c){_0x4d979c=_0x4d979c||{};console[_0x2651('0x10e')](...LGT,'Importing\x20creature\x20\x22'+_0x42770f['name']+_0x2651('0x10')+Parser['sourceJsonToAbv'](_0x42770f[_0x2651('0x73')])+'\x22)');if(this['_actor'])throw new Error('Cannot\x20import\x20creature\x20to\x20actor!');let _0x5f4272=this[_0x2651('0xe0')]?null:await Actor['create']({'name':_0x2651('0x61'),'type':'npc'},{'renderSheet':!!_0x4d979c['isTemp'],'temporary':!!_0x4d979c[_0x2651('0x29')]});const _0x27b47d={};const _0x48c264=await Renderer['utils'][_0x2651('0x63')]({'entity':_0x42770f,'pFnPostProcess':Renderer[_0x2651('0x89')][_0x2651('0x3e')][_0x2651('0xbf')](null,_0x42770f),'fluffBaseUrl':'data/bestiary/','fluffProp':_0x2651('0x11')});const _0x30bba0={'actor':_0x5f4272,'pb':Parser[_0x2651('0x97')](_0x42770f['cr']),'fluff':_0x48c264};_0x30bba0[_0x2651('0xa5')]=_0x30bba0['pb'];_0x30bba0['legendaryMeta']=DataUtil[_0x2651('0x89')][_0x2651('0x112')](_0x42770f);await this[_0x2651('0x83')](_0x42770f,_0x27b47d,_0x30bba0);_0x27b47d['data']={};if(!_0x4d979c[_0x2651('0x29')]&&!this['_pack']){const _0x104e8b=await this['_pImportEntry_pGetFolderId'](_0x42770f);if(_0x104e8b)_0x27b47d[_0x2651('0xd2')]=_0x104e8b;}_0x27b47d[_0x2651('0x7a')]={'default':Config['get'](_0x2651('0xa7'),_0x2651('0xb0'))};this[_0x2651('0x105')](_0x42770f,_0x27b47d['data'],_0x30bba0);this[_0x2651('0x5c')](_0x42770f,_0x27b47d[_0x2651('0x2f')],_0x30bba0);this['_pImportEntry_fillData_Details'](_0x42770f,_0x27b47d[_0x2651('0x2f')],_0x30bba0);this['_pImportEntry_fillData_Skills'](_0x42770f,_0x27b47d['data'],_0x30bba0);this[_0x2651('0xdc')](_0x42770f,_0x27b47d[_0x2651('0x2f')],_0x30bba0);this[_0x2651('0x3')](_0x42770f,_0x27b47d[_0x2651('0x2f')],_0x30bba0);this[_0x2651('0x65')](_0x42770f,_0x27b47d['data'],_0x30bba0);this[_0x2651('0xc')](_0x42770f,_0x27b47d[_0x2651('0x2f')],_0x30bba0);await this[_0x2651('0x22')](_0x42770f,_0x27b47d,_0x30bba0);if(_0x4d979c[_0x2651('0x29')]){_0x5f4272=await Actor[_0x2651('0x77')]({..._0x27b47d,'type':_0x2651('0x4')},{'renderSheet':!![],'temporary':!![]});_0x30bba0[_0x2651('0x23')]=_0x5f4272;await this[_0x2651('0x66')](_0x42770f,_0x27b47d,_0x30bba0,_0x4d979c);return _0x5f4272;}else if(this[_0x2651('0xe0')]){_0x5f4272=await Actor['create']({..._0x27b47d,'type':_0x2651('0x4')},{'temporary':!![]});_0x30bba0[_0x2651('0x23')]=_0x5f4272;await this[_0x2651('0x66')](_0x42770f,_0x27b47d,_0x30bba0,_0x4d979c);await this['_pack'][_0x2651('0x5d')](_0x5f4272);return _0x5f4272;}else{await this[_0x2651('0x66')](_0x42770f,_0x27b47d,_0x30bba0,_0x4d979c);const _0x54ee21=_0x27b47d[_0x2651('0xde')][_0x2651('0x2b')];await _0x5f4272[_0x2651('0xcf')](_0x27b47d);if(_0x5f4272[_0x2651('0x2f')][_0x2651('0xde')]!==_0x54ee21){await _0x5f4272[_0x2651('0xcf')]({'token':{'img':_0x54ee21}});}if(!_0x4d979c['isTemp'])await game['actors'][_0x2651('0x42')](_0x5f4272);return _0x5f4272;}}async[_0x2651('0x83')](_0x521bb5,_0x4d6989,_0x53a798){_0x4d6989[_0x2651('0xf2')]=DataConverter[_0x2651('0x80')](_0x521bb5);let _0x401b97=Vetools[_0x2651('0xe')](_0x53a798[_0x2651('0x88')]);if(!_0x401b97){if(await Vetools['pHasTokenUrl'](_0x521bb5))_0x401b97=await Vetools['pGetTokenUrl'](_0x521bb5);else{const _0x32d64d=await DataConverter[_0x2651('0x52')](_0x2651('0x89'),_0x521bb5);if(_0x32d64d&&!_0x32d64d['toLowerCase']()[_0x2651('0xac')]('mystery-man.svg'))_0x401b97=_0x32d64d;else _0x401b97=await Vetools['pGetTokenUrl'](_0x521bb5);}}_0x4d6989[_0x2651('0x2b')]=_0x401b97;_0x4d6989['type']=_0x2651('0x4');}[_0x2651('0x105')](_0x2e3526,_0x14a10d,_0x2ce74b){const _0x288ebd={};Parser[_0x2651('0x48')][_0x2651('0x58')](_0xf14f87=>{let _0x5ebbd9=0x0;const _0x44b182=Parser['getAbilityModNumber'](_0x2e3526[_0xf14f87]);if(_0x2e3526[_0x2651('0x102')]&&_0x2e3526[_0x2651('0x102')][_0xf14f87]){const _0x1206f1=Number(_0x2e3526[_0x2651('0x102')][_0xf14f87]);if(!isNaN(_0x1206f1)){const _0x4519ad=Parser['getAbilityModNumber'](_0x2e3526[_0xf14f87]);if(_0x4519ad+_0x2ce74b['pb']===_0x1206f1)_0x5ebbd9=0x1;else if(_0x4519ad+0x2*_0x2ce74b['pb']===_0x1206f1)_0x5ebbd9=0x2;}}_0x288ebd[_0xf14f87]={'value':_0x2e3526[_0xf14f87],'min':0x3,'proficient':_0x5ebbd9,'mod':_0x44b182,'save':_0x44b182+_0x5ebbd9*_0x2ce74b['pb']};});_0x14a10d[_0x2651('0xfe')]=_0x288ebd;}[_0x2651('0x5c')](_0x5a1c3d,_0x1df120,_0x5e8496){const _0x4ab065={};let _0x346931='10';let _0x38fd8d='';if(_0x5a1c3d['ac']&&_0x5a1c3d['ac'][_0x2651('0xca')]){const _0x186d74=_0x5a1c3d['ac'][0x0];if(typeof _0x186d74==='number')_0x346931=''+_0x186d74;else if(typeof _0x186d74['ac']==='number')_0x346931=''+_0x186d74['ac'];if(_0x186d74['from'])_0x38fd8d=_0x186d74[_0x2651('0xb4')][_0x2651('0xaa')](_0x5d551b=>Renderer[_0x2651('0xfa')](_0x5d551b)[_0x2651('0x12')]())[_0x2651('0x4d')](',\x20');}_0x4ab065['ac']={'min':0x0,'value':_0x346931};let _0x240ff6=0x0;let _0x3f292b='';if(_0x5a1c3d['hp']){if(_0x5a1c3d['hp'][_0x2651('0x1b')])_0x240ff6=_0x5a1c3d['hp']['average'];if(_0x5a1c3d['hp'][_0x2651('0x78')])_0x3f292b=_0x5a1c3d['hp']['formula'];}_0x4ab065['hp']={'value':_0x240ff6,'min':0x0,'max':_0x240ff6,'temp':0x0,'tempmax':0x0,'formula':_0x3f292b};_0x4ab065['init']={'value':0x0,'mod':0x0,'bonus':0x0,'total':Parser['getAbilityModNumber'](_0x5a1c3d[_0x2651('0xd3')]),'prof':0x0};_0x4ab065[_0x2651('0xe2')]=_0x5e8496['pb'];const _0x5cfc9c=Parser[_0x2651('0xf9')](_0x5a1c3d);const [_0x3a4001,..._0x1601ac]=_0x5cfc9c[_0x2651('0x69')](',\x20');_0x4ab065[_0x2651('0xe4')]={'value':_0x3a4001,'special':_0x1601ac[_0x2651('0x4d')](',\x20')};let _0x1b47d9='';let _0x173c6d=0x8;let _0x7d2d01=0x0;let _0x229093='';if(_0x5a1c3d[_0x2651('0x107')]){const _0xd86c91=_0x5a1c3d[_0x2651('0x107')][_0x2651('0x51')](_0x33a444=>_0x33a444[_0x2651('0xba')]);if(_0xd86c91['length']){const _0xe7c727=_0xd86c91[0x0]['ability'];const _0x5eeccc=Parser[_0x2651('0x85')](_0x5a1c3d[_0xe7c727]);_0x1b47d9=_0xe7c727;_0x173c6d=_0x5eeccc+_0x5e8496['pb'];}_0x7d2d01=_0x5a1c3d[_0x2651('0x107')]['map'](_0xcfad53=>ImportListCreature[_0x2651('0x41')](_0xcfad53))['find'](Boolean);_0x229093=_0x5a1c3d[_0x2651('0x107')][_0x2651('0xaa')](_0x266a7f=>ImportListCreature[_0x2651('0xff')](_0x266a7f))[_0x2651('0x30')](Boolean);}_0x4ab065['spellcasting']=_0x1b47d9;_0x4ab065[_0x2651('0xea')]=_0x173c6d;if(_0x7d2d01||_0x229093){_0x1df120[_0x2651('0x53')]={'level':_0x7d2d01,'name':_0x229093};}_0x1df120[_0x2651('0x24')]=_0x4ab065;}[_0x2651('0xc0')](_0x55dd62,_0x3eda8c,_0x16aa4a){const _0x55d21e={};_0x55d21e['alignment']=_0x55dd62[_0x2651('0x31')]?Parser[_0x2651('0x101')](_0x55dd62[_0x2651('0x31')])[_0x2651('0x87')]():'';let _0xd7f793='';if(_0x16aa4a[_0x2651('0x88')]&&_0x16aa4a['fluff'][_0x2651('0x74')]){const _0x550f76=_0x16aa4a[_0x2651('0x88')];const _0x3da8a3=_0x550f76[_0x2651('0xc1')]==='section'?-0x1:0x2;if(_0x550f76['type']!=='section')Renderer[_0x2651('0x21')]()[_0x2651('0x8f')](![]);_0xd7f793=Renderer['get']()[_0x2651('0x8f')](!![])[_0x2651('0x104')]({'type':_0x550f76[_0x2651('0xc1')],'entries':_0x550f76[_0x2651('0x74')]},_0x3da8a3);}_0x55d21e[_0x2651('0xc9')]={'value':_0xd7f793};if(_0x3eda8c[_0x2651('0x53')]){_0x55d21e['class']=_0x3eda8c['_temp_details_class'];delete _0x3eda8c['_temp_details_class'];}else{_0x55d21e[_0x2651('0x2a')]={};}_0x55d21e[_0x2651('0x43')]='';_0x55d21e[_0x2651('0xc1')]=Parser[_0x2651('0xae')](_0x55dd62[_0x2651('0xc1')])[_0x2651('0xed')];_0x55d21e[_0x2651('0xb6')]=_0x55dd62[_0x2651('0xb6')]?_0x55dd62[_0x2651('0xb6')][_0x2651('0x98')](SortUtil[_0x2651('0x6e')])[_0x2651('0xaa')](_0xc7d33c=>_0xc7d33c[_0x2651('0xf0')]())[_0x2651('0x4d')](',\x20'):'';const _0x30253a=Parser['crToNumber'](_0x55dd62['cr']);_0x55d21e['cr']=_0x30253a===0x64?0x0:_0x30253a;_0x55d21e['xp']={'value':_0x55dd62['cr']?Parser[_0x2651('0x8')](_0x55dd62['cr'])||0x0:0x0};_0x55d21e[_0x2651('0x73')]=DataConverter[_0x2651('0x103')](_0x55dd62);_0x3eda8c[_0x2651('0x6f')]=_0x55d21e;}[_0x2651('0xda')](_0x11c899,_0x14dc7c,_0x31e832){const _0x13ad57={};Object[_0x2651('0x74')](UtilActors['SKILL_ABV_TO_FULL'])[_0x2651('0x58')](([_0x122f44,_0x3a53e3])=>{const _0x5a78c8=Parser[_0x2651('0x67')](_0x3a53e3);let _0x591eea=0x0;let _0x116383=Parser['getAbilityModNumber'](_0x11c899[_0x5a78c8]);if(_0x11c899[_0x2651('0xc3')]&&_0x11c899['skill'][_0x3a53e3]){const _0x16cf41=Number(_0x11c899[_0x2651('0xc3')][_0x3a53e3]);if(!isNaN(_0x16cf41)){const _0x3d394f=Parser['getAbilityModNumber'](_0x11c899[_0x5a78c8]);if(_0x3d394f+_0x31e832['pb']===_0x16cf41)_0x591eea=0x1;else if(_0x3d394f+0x2*_0x31e832['pb']===_0x16cf41)_0x591eea=0x2;}}_0x13ad57[_0x122f44]={'value':_0x591eea,'ability':_0x5a78c8,'mod':_0x116383,'bonus':0x0,'passive':0xa+_0x116383};});_0x14dc7c['skills']=_0x13ad57;}[_0x2651('0xdc')](_0x413405,_0x4bdbff){const _0x138738={};_0x138738['size']=UtilActors['VET_SIZE_TO_ABV'][_0x413405['size']]||'med';_0x138738[_0x2651('0x8b')]=_0x413405['senses']?_0x413405[_0x2651('0x8b')]['join'](',\x20'):'';const _0x5779ba=new Set();let _0x5a088=[];if(_0x413405[_0x2651('0xc4')]){_0x413405[_0x2651('0xc4')]['forEach'](_0x1d404e=>{const _0x4c6263=_0x1d404e[_0x2651('0x87')]();const _0x5bce05=_0x4c6263==='thieves\x27\x20cant'?'cant':_0x4c6263;if(UtilActors[_0x2651('0x0')][_0x2651('0xac')](_0x5bce05))_0x5779ba[_0x2651('0x10c')](_0x5bce05);else{_0x5779ba[_0x2651('0x10c')]('custom');_0x5a088[_0x2651('0x14')](_0x1d404e);}});}_0x138738[_0x2651('0xc4')]={'value':[..._0x5779ba],'custom':_0x5a088[_0x2651('0x4d')](',\x20')};const _0x4cc08d=(_0x295e67,_0x4eb287,_0x4b2ae2,_0x48d422,_0x86dac7)=>{if(_0x413405[_0x4b2ae2]){_0x413405[_0x4b2ae2][_0x2651('0x58')](_0x39b8f6=>{if(_0x295e67[_0x2651('0xac')](_0x39b8f6))_0x48d422[_0x2651('0x10c')](_0x39b8f6);else{const _0x55cac7=_0x4eb287([_0x39b8f6]);_0x48d422[_0x2651('0x10c')]('custom');_0x86dac7[_0x2651('0x14')](_0x55cac7);}});}};const _0x2b7274=new Set();let _0x3394f4=[];_0x4cc08d(UtilActors[_0x2651('0xcc')],Parser[_0x2651('0x47')],_0x2651('0xa6'),_0x2b7274,_0x3394f4);_0x138738['di']={'value':[..._0x2b7274],'custom':_0x3394f4[_0x2651('0x4d')](',\x20')};const _0xd661da=new Set();let _0x46e3a0=[];_0x4cc08d(UtilActors[_0x2651('0xcc')],Parser[_0x2651('0x47')],_0x2651('0xd9'),_0xd661da,_0x46e3a0);_0x138738['dr']={'value':[..._0xd661da],'custom':_0x46e3a0['join'](',\x20')};const _0x8e9046=new Set();let _0x4f2144=[];_0x4cc08d(UtilActors[_0x2651('0xcc')],Parser[_0x2651('0x47')],'vulnerable',_0x8e9046,_0x4f2144);_0x138738['dv']={'value':[..._0x8e9046],'custom':_0x4f2144[_0x2651('0x4d')](',\x20')};const _0x46167c=new Set();let _0x3b3d00=[];_0x4cc08d(UtilActors[_0x2651('0x37')],_0x8b8125=>Parser['monCondImmToFull'](_0x8b8125,!![]),_0x2651('0x99'),_0x46167c,_0x3b3d00);_0x138738['ci']={'value':[..._0x46167c],'custom':_0x3b3d00[_0x2651('0x4d')](',\x20')};_0x4bdbff[_0x2651('0x5a')]=_0x138738;}[_0x2651('0x3')](_0x48b3cc,_0x5a4071){const _0x5b4a2e={};_0x5b4a2e['pp']=0x0;_0x5b4a2e['gp']=0x0;_0x5b4a2e['sp']=0x0;_0x5b4a2e['cp']=0x0;_0x5a4071['currency']=_0x5b4a2e;}[_0x2651('0x65')](_0x4ae959,_0x131c17){const _0x4ece6e={};_0x4ece6e['spell0']={'value':0x0,'max':0x0};if(_0x4ae959['spellcasting']&&_0x4ae959[_0x2651('0x107')][_0x2651('0x10d')](_0x18b2de=>_0x18b2de[_0x2651('0xe1')])){for(let _0x3de890=0x1;_0x3de890<0xa;++_0x3de890){const _0x4c29c9=_0x4ae959[_0x2651('0x107')]['find'](_0x35a3e1=>_0x35a3e1[_0x2651('0xe1')]&&_0x35a3e1[_0x2651('0xe1')][_0x3de890]&&_0x35a3e1[_0x2651('0xe1')][_0x3de890]['slots']);let _0x1c56f4=0x0;if(_0x4c29c9)_0x1c56f4=_0x4c29c9[_0x2651('0xe1')][_0x3de890][_0x2651('0x28')];_0x4ece6e[_0x2651('0x26')+_0x3de890]={'value':_0x1c56f4,'max':_0x1c56f4};}}else{for(let _0x2e9437=0x1;_0x2e9437<0xa;++_0x2e9437){_0x4ece6e[_0x2651('0x26')+_0x2e9437]={'value':0x0,'max':0x0};}}_0x131c17[_0x2651('0xe1')]=_0x4ece6e;}[_0x2651('0xc')](_0x1ef9a2,_0x118642,_0x1c50f9){const _0x1bbc8b={};let _0x35e43b=0x0;if(_0x1ef9a2[_0x2651('0x90')])_0x35e43b=_0x1ef9a2['legendaryActions']||0x3;_0x1bbc8b['legact']={'value':_0x35e43b,'max':_0x35e43b};let _0x435118=0x0;if(_0x1ef9a2[_0x2651('0xd7')]){const _0x16d637=_0x1ef9a2['trait']['find'](_0x37a4db=>_0x37a4db[_0x2651('0xf2')]&&_0x37a4db['name']['includes'](_0x2651('0x33')));if(_0x16d637){const _0x37230a=/\((\d+)\/Day\)/i[_0x2651('0xb5')](_0x16d637[_0x2651('0xf2')]);if(_0x37230a)_0x435118=Number(_0x37230a[0x1]);}}_0x1bbc8b['legres']={'value':_0x435118,'max':_0x435118};_0x1bbc8b[_0x2651('0x27')]={'value':!!(_0x1c50f9[_0x2651('0x7c')]&&_0x1c50f9[_0x2651('0x7c')]['lairActions']),'initiative':0x14};_0x118642[_0x2651('0xb9')]=_0x1bbc8b;}async['_pImportEntry_pFillToken'](_0x5bee89,_0x29f283){let _0x1032aa=0x1;switch(_0x5bee89[_0x2651('0x16')]||'M'){case'L':_0x1032aa=0x2;break;case'H':_0x1032aa=0x3;break;case'G':_0x1032aa=0x4;break;}let _0x232509=0x0;let _0x45b56c=0x0;(_0x5bee89[_0x2651('0x8b')]||[])['forEach'](_0x5d2127=>{const _0x2aedf7=/(blindsight|darkvision|tremorsense|truesight)\s*(\d+)/i['exec'](_0x5d2127);if(_0x2aedf7){const _0xfb04b2=Number(_0x2aedf7[0x2]);switch(_0x2aedf7[0x1]){case _0x2651('0x116'):_0x232509=Math[_0x2651('0x54')](_0x232509,_0xfb04b2);break;case _0x2651('0xb8'):case _0x2651('0x109'):case _0x2651('0x6'):_0x45b56c=Math['max'](_0x45b56c,_0xfb04b2);break;}}});_0x29f283[_0x2651('0xde')]={'displayName':Config[_0x2651('0x21')](_0x2651('0x71'),'npcNameDisplay'),'name':UtilApplications[_0x2651('0x10a')](_0x5bee89[_0x2651('0x7d')]||_0x5bee89[_0x2651('0xf2')]),'img':await Vetools[_0x2651('0x3c')](_0x5bee89),'width':_0x1032aa,'height':_0x1032aa,'scale':0x1,'elevation':0x0,'lockRotation':![],'rotation':0x0,'vision':Config[_0x2651('0x21')](_0x2651('0x71'),_0x2651('0x55')),'dimSight':_0x232509,'brightSight':_0x45b56c,'dimLight':0x0,'brightLight':0x0,'sightAngle':0x168,'lightAngle':0x168,'actorLink':![],'actorData':{},'disposition':Config['get']('importToken','npcDisposition'),'displayBars':Config[_0x2651('0x21')]('importToken',_0x2651('0xe8')),'bar1':{'attribute':Config[_0x2651('0x21')](_0x2651('0x71'),_0x2651('0x64'))},'bar2':{'attribute':Config[_0x2651('0x21')](_0x2651('0x71'),'npcBar2Attribute')},'flags':{},'randomImg':![]};}async[_0x2651('0x66')](_0x5d5798,_0x5783df,_0x968a9d,_0x262caa){_0x968a9d[_0x2651('0xef')]=[];await this['_pImportEntry_pFillItems_pActions'](_0x5d5798,_0x5783df,_0x968a9d);this[_0x2651('0x50')](_0x5d5798,_0x5783df,_0x968a9d,{'prop':_0x2651('0xd7')});this[_0x2651('0x50')](_0x5d5798,_0x5783df,_0x968a9d,{'prop':_0x2651('0x8a'),'activationType':_0x2651('0x8a'),'activationCost':0x1});this[_0x2651('0x50')](_0x5d5798,_0x5783df,_0x968a9d,{'prop':_0x2651('0x90'),'activationType':'legendary','activationCost':_0x1dff6c=>{if(_0x1dff6c[_0x2651('0xf2')]){const _0xb071e5=/\(costs (\d+) actions?\)/i['exec'](_0x1dff6c[_0x2651('0xf2')]);if(_0xb071e5)return Number(_0xb071e5[0x1]);}return 0x1;}});this[_0x2651('0x110')](_0x5d5798,_0x5783df,_0x968a9d);await this[_0x2651('0x9b')](_0x5d5798,_0x5783df,_0x968a9d);const _0x1f6301=_0x262caa[_0x2651('0x29')]||this[_0x2651('0xe0')]!=null;const _0x2c4175={..._0x968a9d,'isTemporary':_0x1f6301};await this[_0x2651('0x44')](_0x5d5798,_0x5783df,_0x2c4175);await UtilActors['pAddActorItems'](_0x968a9d[_0x2651('0x23')],_0x968a9d[_0x2651('0xef')],_0x1f6301);}['_pImportEntry_pFillItems_addTextOnlyItem'](_0x544839,_0x57771d,_0x4561bc,_0x47e04d){_0x57771d[_0x2651('0xef')][_0x2651('0x14')](DataConverter[_0x2651('0xa2')](_0x4561bc,{..._0x47e04d,'source':_0x544839[_0x2651('0x73')]}));}[_0x2651('0x50')](_0x4d8d35,_0x228922,_0x431cb4,_0x4e459d){if(!_0x4d8d35[_0x4e459d['prop']])return;_0x4d8d35[_0x4e459d[_0x2651('0xe9')]][_0x2651('0x58')](_0x4105e7=>{const _0x314fd1=_0x4e459d['activationCost']&&typeof _0x4e459d['activationCost']===_0x2651('0x1c')?_0x4e459d['activationCost'](_0x4105e7):_0x4e459d[_0x2651('0xce')]||0x0;this[_0x2651('0x38')](_0x4d8d35,_0x431cb4,_0x4105e7,{'fvttType':'feat','activationType':_0x4e459d[_0x2651('0x4f')],'activationCost':_0x314fd1,'img':_0x2651('0x8d')+SharedConsts[_0x2651('0xbe')]+_0x2651('0x96')});});}['_pImportEntry_pFillItems_lairActions'](_0x3dc241,_0x36321e,_0x48dae5){if(!_0x48dae5[_0x2651('0x7c')]||!_0x48dae5['legendaryMeta'][_0x2651('0xdf')])return;const _0x29e56e=_0x57f68b=>{if(typeof _0x57f68b==='string'){const _0x8f87ee=Renderer[_0x2651('0xfa')](_0x57f68b);let _0x5e3e12='';const _0x3f7413=_0x8f87ee[_0x2651('0x69')]('\x20');for(const _0xe248bf of _0x3f7413){if(_0x5e3e12[_0x2651('0xca')]+_0xe248bf[_0x2651('0xca')]<0x32){_0x5e3e12+=_0xe248bf+'\x20';}else break;}if(_0x8f87ee['length']>_0x5e3e12[_0x2651('0x12')]()['length'])_0x5e3e12+='...';else _0x5e3e12=_0x5e3e12[_0x2651('0x12')]();_0x57f68b={'type':_0x2651('0x74'),'name':_0x5e3e12,'entries':[_0x57f68b]};}const _0x10c534=JSON['stringify'](_0x57f68b);const {saveAbility,saveScaling,saveDc}=this[_0x2651('0x57')](_0x3dc241,_0x48dae5[_0x2651('0xa5')],_0x10c534);const _0x2b92c1=typeof _0x57f68b['entries'][0x0]===_0x2651('0x7e')?this[_0x2651('0x7')](_0x57f68b['entries'][0x0]):[];const _0x1ef822=this[_0x2651('0x7f')](_0x2b92c1);this[_0x2651('0x38')](_0x3dc241,_0x48dae5,_0x57f68b,{'fvttType':_0x2651('0x93'),'activationType':_0x2651('0x27'),'activationCost':0x1,'img':_0x2651('0x8d')+SharedConsts[_0x2651('0xbe')]+_0x2651('0x9e'),'saveAbility':saveAbility,'saveDc':saveDc,'saveScaling':saveScaling,'damageParts':_0x1ef822});};const _0x163f81=_0x48dae5[_0x2651('0x7c')]['lairActions'];const _0x4f3117=_0x163f81['find'](_0x9afc2f=>_0x9afc2f['type']===_0x2651('0x3f'));if(_0x4f3117){_0x4f3117[_0x2651('0xef')][_0x2651('0x58')](_0x45c9a8=>_0x29e56e(_0x45c9a8));}else{_0x29e56e(_0x163f81);}}async[_0x2651('0x79')](_0x4cd663,_0xa839ef,_0x578c03){if(!_0x4cd663[_0x2651('0x35')])return;for(const _0x238acc of _0x4cd663['action']){await this[_0x2651('0x10f')](_0x4cd663,_0xa839ef,_0x238acc,_0x578c03);}}async[_0x2651('0x10f')](_0x4b00ab,_0x224930,_0x4691b4,_0xa2c564){const _0x5c576a=DataConverter[_0x2651('0x5e')](_0x4691b4);const _0x5b5907=_0x4691b4[_0x2651('0x74')]?JSON[_0x2651('0x9a')](_0x4691b4['entries']):null;let _0x440174=_0xa2c564[_0x2651('0xa5')]||_0xa2c564['pb']||0x0;let _0x9afdd4=!![];const _0x4ac442=[];const _0x7de06=[];let _0xb71eff=0x0;let _0x1b22fc=0x0;let _0x3f8534='';let _0x5208e8=_0x2651('0x49');let _0x194404=![];let _0x5b811d=0x0;if(_0x4691b4['entries']&&_0x4691b4[_0x2651('0x74')][0x0]&&typeof _0x4691b4[_0x2651('0x74')][0x0]===_0x2651('0x7e')){const _0xb0da7c=_0x4691b4['entries'][0x0];_0x4ac442[_0x2651('0x14')](...this['_getDamageTuples'](_0xb0da7c));const _0x5995af=/range (\d+)\/(\d+) ft/gi[_0x2651('0xb5')](_0xb0da7c);if(_0x5995af){_0xb71eff=Number(_0x5995af[0x1]);_0x1b22fc=Number(_0x5995af[0x2]);}else{const _0x3a1984=/reach (\d+) ft/gi[_0x2651('0xb5')](_0xb0da7c);if(_0x3a1984){_0xb71eff=Number(_0x3a1984[0x1]);}}const _0x59363f=/{@hit ([^}]+)}/gi[_0x2651('0xb5')](_0xb0da7c);if(_0x59363f){const _0x5d2a6f=Number(_0x59363f[0x1]);if(!isNaN(_0x5d2a6f)){const _0x48684f=/\+(\d)/[_0x2651('0xb5')](_0x4691b4[_0x2651('0xf2')]||'');const _0x39b9c0=_0x48684f?Number(_0x48684f[0x0]):0x0;const _0x375ac1=_0x5d2a6f-_0x39b9c0-_0x440174;const _0x182a95=_0x4ac442['length']?_0x4ac442[0x0][0x0]||'':'';const _0x5934ff=/\d+\s*([-+]\s*\d+)$/[_0x2651('0xb5')](_0x182a95[_0x2651('0x12')]());let _0x558f6a;if(_0x5934ff)_0x558f6a=Number(_0x5934ff[0x1][_0x2651('0x40')](/\s+/g,''))-_0x39b9c0;let _0x49d6ab=_0x375ac1;if(_0x558f6a!=null&&_0x375ac1!==_0x558f6a){_0x49d6ab=_0x558f6a;if(_0x375ac1<_0x558f6a){_0x9afdd4=![];}else{const _0xdd3826=_0x375ac1-_0x558f6a;if(_0xa2c564['pb']===0x0){_0xa2c564['assumedPb']=_0xa2c564['assumedPb']||_0xdd3826;}else{_0x5b811d=_0xdd3826;}}}for(const _0x163970 of Parser[_0x2651('0x48')]){const _0x129727=Parser[_0x2651('0x85')](_0x4b00ab[_0x163970]);if(_0x129727===_0x49d6ab){_0x5208e8=_0x163970;break;}}}}const _0x1dfdd3=/{@atk ([^}]+)}/gi[_0x2651('0xb5')](_0xb0da7c);if(_0x1dfdd3){_0x194404=!![];if(_0x1dfdd3[0x1][_0x2651('0xac')]('s')){if(_0x1dfdd3[0x1][_0x2651('0xac')]('m'))_0x3f8534=_0x2651('0xbd');else _0x3f8534=_0x2651('0x36');}else if(_0x1dfdd3[0x1][_0x2651('0xac')]('m'))_0x3f8534=_0x2651('0xa0');else if(_0x1dfdd3[0x1][_0x2651('0xac')]('r'))_0x3f8534='rwak';}}_0x7de06[_0x2651('0x14')](...this[_0x2651('0x7f')](_0x4ac442,_0x4b00ab[_0x5208e8]));const {saveAbility,saveScaling,saveDc}=this['_getSavingThrowData'](_0x4b00ab,_0x440174,_0x5b5907);if(_0x194404){await this[_0x2651('0x3d')](_0x4b00ab,_0x224930,_0x4691b4,_0xa2c564,{'offensiveAbility':_0x5208e8,'damageParts':_0x7de06,'rangeShort':_0xb71eff,'rangeLong':_0x1b22fc,'actionType':_0x3f8534,'isProficient':_0x9afdd4,'description':_0x5c576a,'saveAbility':saveAbility,'saveDc':saveDc,'saveScaling':saveScaling,'attackBonus':_0x5b811d});}else{this[_0x2651('0x38')](_0x4b00ab,_0xa2c564,_0x4691b4,{'fvttType':_0x2651('0x93'),'img':_0x2651('0x8d')+SharedConsts['MODULE_NAME']+_0x2651('0xc5'),'activationType':_0x2651('0x35'),'activationCost':0x1,'description':_0x5c576a,'saveAbility':saveAbility,'saveDc':saveDc,'saveScaling':saveScaling,'damageParts':_0x7de06,'attackBonus':_0x5b811d});}}[_0x2651('0x57')](_0x1267ab,_0x160d1a,_0x35d187){if(!_0x35d187)return MiscUtil['copy'](ImportListCreature['_DEFAULT_SAVING_THROW_DATA']);let {saveAbility,saveScaling,saveDc}=MiscUtil[_0x2651('0xf6')](ImportListCreature['_DEFAULT_SAVING_THROW_DATA']);const _0x5c49a4=/(?:{@dc (\d+)}|DC\s*(\d+))\s*(Strength|Dexterity|Constitution|Intelligence|Wisdom|Charisma)/i[_0x2651('0xb5')](_0x35d187);if(_0x5c49a4){saveDc=Number(_0x5c49a4[0x1]||_0x5c49a4[0x2]);saveAbility=_0x5c49a4[0x3][_0x2651('0x87')]()[_0x2651('0xf5')](0x0,0x3);saveScaling=_0x2651('0xf7');if(_0x160d1a&&0x1===0x2){const _0x234ddd=saveDc-_0x160d1a-0x8;for(const _0x4aea7a of[_0x2651('0xd5'),_0x2651('0x3b'),'int',_0x2651('0x49'),_0x2651('0xd3'),'con']){const _0x5c3387=Parser[_0x2651('0x85')](_0x1267ab[_0x4aea7a]);if(_0x5c3387===_0x234ddd){saveScaling=_0x4aea7a;break;}}}}return{'saveAbility':saveAbility,'saveScaling':saveScaling,'saveDc':saveDc};}[_0x2651('0x7')](_0x2f3a27){const _0x15e45a=[];const _0x1420c1=/(?:(\d+)|\(?{@(?:dice|damage) ([^}]+)}\)?)(?:\s+[-+]\s+[-+a-zA-Z0-9 ]*?)? ([^ ]+) damage/gi;let _0x54f68d;while(_0x54f68d=_0x1420c1[_0x2651('0xb5')](_0x2f3a27)){const _0x46c721=_0x54f68d[0x1]||_0x54f68d[0x2];const _0x442161=_0x54f68d[0x3];_0x15e45a[_0x2651('0x14')]([_0x46c721,_0x442161]);}return _0x15e45a;}['_getDamageParts'](_0x3191c7,_0x3ca124){if(!_0x3191c7[_0x2651('0xca')])return[];_0x3191c7=MiscUtil['copy'](_0x3191c7);if(_0x3ca124){_0x3191c7[_0x2651('0x58')](_0x3ecb37=>{const _0x380c78=Parser['getAbilityModNumber'](_0x3ca124);const _0xcfb01f=/(\d+d\d+\s*)([-+]\s*\d+)([ -+].*)?$/[_0x2651('0xb5')](_0x3ecb37[0x0]);if(!_0xcfb01f)return;const _0x2631c4=Number(_0xcfb01f[0x2]['replace'](/\s*/g,''));if(_0x2631c4===_0x380c78)_0x3ecb37[0x0]=_0xcfb01f[0x1]+_0x2651('0x5')+(_0xcfb01f[0x3]||'');});}return _0x3191c7[_0x2651('0x51')](_0x259d3f=>_0x259d3f[_0x2651('0xca')]);}async['_pImportEntry_pFillItems_pAddWeapon'](_0x1b7451,_0xe828e3,_0x406bcd,_0x237e2a,{offensiveAbility,damageParts,rangeShort,rangeLong,actionType,isProficient,description,saveAbility,saveDc,saveScaling,attackBonus}){const _0x24cdb3=await DataConverter[_0x2651('0x4a')](_0x1b7451['size'],_0x406bcd);const _0xfc92a={'name':UtilApplications[_0x2651('0x10a')](Renderer['stripTags'](_0x406bcd[_0x2651('0xf2')]||'')||'\x20'),'type':_0x2651('0x91'),'data':{'source':DataConverter[_0x2651('0x103')](_0x1b7451),'description':{'value':description},'damage':{'parts':damageParts,'versatile':_0x24cdb3['damageVersatile']},'range':{'value':rangeShort,'long':rangeLong,'units':'ft'},'actionType':actionType,'proficient':isProficient,'quantity':0x1,'weight':_0x24cdb3[_0x2651('0xa')],'price':_0x24cdb3['price'],'rarity':_0x24cdb3[_0x2651('0xc8')],'weaponType':_0x24cdb3['weaponType'],'properties':_0x24cdb3['itemProperties'],'attuned':_0x24cdb3[_0x2651('0x18')],'ability':offensiveAbility,'equipped':!![],'identified':_0x24cdb3[_0x2651('0xaf')],'activation':{'type':_0x2651('0x35'),'cost':0x1,'condition':''},'duration':{'value':null,'units':''},'target':{'value':null,'units':'','type':''},'uses':{'value':0x0,'max':0x0,'per':null},'attackBonus':attackBonus,'chatFlavor':'','critical':null,'formula':'','save':{'ability':saveAbility,'dc':saveDc,'scaling':saveScaling}},'img':_0x24cdb3[_0x2651('0x2b')]};_0x237e2a['items'][_0x2651('0x14')](_0xfc92a);}async[_0x2651('0x9b')](_0x1fa605,_0x216b67,_0xe50ad0){if(!_0x1fa605['ac'])return;const _0x532ab5=new Set();_0x1fa605['ac'][_0x2651('0x51')](_0x7081dd=>_0x7081dd['from']&&_0x7081dd[_0x2651('0xb4')][_0x2651('0xca')])[_0x2651('0x58')](_0x2d2450=>{_0x2d2450[_0x2651('0xb4')]['forEach'](_0x583b8d=>{_0x583b8d[_0x2651('0x40')](/{@item ([^}]+)}/gi,(..._0x3c6b01)=>{const [_0x5c2a8d,_0x46e368]=_0x3c6b01[0x1][_0x2651('0x12')]()['toLowerCase']()['split']('|');const _0x3d0ef7=UrlUtil[_0x2651('0x95')][UrlUtil[_0x2651('0x75')]]({'name':_0x5c2a8d,'source':_0x46e368||SRC_DMG});_0x532ab5[_0x2651('0x10c')](_0x3d0ef7);});});});for(const _0x56691b of _0x532ab5){const _0x1e0be1=await Renderer['hover'][_0x2651('0x1')](UrlUtil[_0x2651('0x75')],_0x56691b);if(!_0x1e0be1)continue;await this[_0x2651('0x70')](_0x1fa605,_0x216b67,_0x1e0be1,_0xe50ad0);}}async['_pImportEntry_pFillItems_pAddItem'](_0x2e87eb,_0x50ad27,_0x1df700,_0x61e0c0){const _0x1bb4ec=await Renderer[_0x2651('0xdd')][_0x2651('0x63')](_0x1df700);const _0x37e9e9=await DataConverter['pGetItemItem'](_0x1df700,{'fluff':_0x1bb4ec,'size':_0x2e87eb[_0x2651('0x16')]});_0x61e0c0[_0x2651('0xef')][_0x2651('0x14')](_0x37e9e9);}async[_0x2651('0x44')](_0x13b071,_0xb5f2c0,_0x1bda21){if(!_0x13b071[_0x2651('0x107')])return;const _0x5a8f34=_0x13b071[_0x2651('0x107')][_0x2651('0xaa')](_0x1fa16a=>ImportListCreature['_getCasterLevelFromEntry'](_0x1fa16a))[_0x2651('0x51')](Boolean)[0x0]||0x0;const _0x3a2461=_0x13b071['spellcasting'][_0x2651('0xaa')](_0x4fe1ab=>_0x4fe1ab['ability'])[0x0]||null;const _0x2ca7e6={};const _0x876514=_0x3fc62a=>{Object['entries'](_0x3fc62a)[_0x2651('0x58')](([_0xf649b6,_0x459b96])=>{_0x2ca7e6[_0xf649b6]=_0x2ca7e6[_0xf649b6]||_0x459b96;});};const _0xef24ec=!![];const _0x3b5774=[];for(const _0x21ce27 of _0x13b071[_0x2651('0x107')]){const _0x4f22d0=MiscUtil[_0x2651('0xf6')](_0x21ce27);if(_0x4f22d0[_0x2651('0xe1')]){const _0x4f8b40=Object[_0x2651('0x46')](_0x4f22d0['spells']);for(const _0x44ca4c of _0x4f8b40){const _0x39fe8c=_0x4f22d0[_0x2651('0xe1')][_0x44ca4c];const _0x1dcb85=_0x39fe8c['lower']!=null?_0x2651('0x72'):_0x2651('0xd6');const _0x3169c5=await DataConverter[_0x2651('0x13')](_0x1bda21[_0x2651('0x23')],JSON[_0x2651('0x9a')](_0x39fe8c[_0x2651('0xe1')]),{'isTemporary':_0x1bda21[_0x2651('0x4c')],'optsGetSpellItem':{'casterLevel':_0x5a8f34,'abilityAbv':_0x3a2461,'isPrepared':_0xef24ec,'preparationMode':_0x1dcb85}});_0x876514(_0x3169c5);}delete _0x4f22d0[_0x2651('0xe1')];}if(_0x4f22d0[_0x2651('0xbb')]){await this[_0x2651('0xc2')](_0x1bda21,_0x4f22d0,'weekly',_0x876514,{'casterLevel':_0x5a8f34,'abilityAbv':_0x3a2461,'isPrepared':_0xef24ec,'usesPer':_0x2651('0xf')});}if(_0x4f22d0['daily']){await this[_0x2651('0xc2')](_0x1bda21,_0x4f22d0,'daily',_0x876514,{'casterLevel':_0x5a8f34,'abilityAbv':_0x3a2461,'isPrepared':_0xef24ec,'usesPer':_0x2651('0xf8')});}if(_0x4f22d0[_0x2651('0x92')]){await this[_0x2651('0xc2')](_0x1bda21,_0x4f22d0,'daily',_0x876514,{'casterLevel':_0x5a8f34,'abilityAbv':_0x3a2461,'isPrepared':_0xef24ec,'usesPer':'sr'});}if(_0x4f22d0[_0x2651('0xd8')]){const _0x21c28d=_0x2651('0xf4');const _0x5c8010=await DataConverter[_0x2651('0x13')](_0x1bda21['actor'],JSON[_0x2651('0x9a')](_0x4f22d0[_0x2651('0xd8')]),{'isTemporary':_0x1bda21[_0x2651('0x4c')],'optsGetSpellItem':{'casterLevel':_0x5a8f34,'abilityAbv':_0x3a2461,'isPrepared':_0xef24ec,'preparationMode':_0x21c28d}});_0x876514(_0x5c8010);delete _0x4f22d0[_0x2651('0xd8')];}if(_0x4f22d0[_0x2651('0x32')]){const _0x23a10c=_0x2651('0xf4');const _0x3b25c5=await DataConverter['pGetSpellHashToItemPosMapAndFillSpells'](_0x1bda21['actor'],JSON[_0x2651('0x9a')](_0x4f22d0[_0x2651('0x32')]),{'isTemporary':_0x1bda21[_0x2651('0x4c')],'optsGetSpellItem':{'casterLevel':_0x5a8f34,'abilityAbv':_0x3a2461,'isPrepared':_0xef24ec,'preparationMode':_0x23a10c,'durationAmount':null,'durationUnit':_0x2651('0x39')}});_0x876514(_0x3b25c5);delete _0x4f22d0['constant'];}_0x3b5774['push'](_0x4f22d0);}await DataConverter['pGetSpellHashToItemPosMapAndFillSpells'](_0x1bda21[_0x2651('0x23')],JSON[_0x2651('0x9a')](_0x3b5774),{'isTemporary':_0x1bda21[_0x2651('0x4c')],'hashToIdMap':_0x2ca7e6,'optsGetSpellItem':{'casterLevel':_0x5a8f34,'abilityAbv':_0x3a2461}});const _0x137178=DataConverter[_0x2651('0xa3')][_0x2651('0xbf')](null,_0x1bda21[_0x2651('0x23')]['id'],_0x2ca7e6);Renderer[_0x2651('0x21')]()[_0x2651('0x19')]('link',_0x2651('0x10b'),_0x137178);const _0x4c37c0=Renderer['monster'][_0x2651('0xa1')](_0x13b071,Renderer[_0x2651('0x21')]());_0x4c37c0['forEach'](_0x19914f=>{this['_pImportEntry_pFillItems_addTextOnlyItem'](_0x13b071,_0x1bda21,_0x19914f,{'fvttType':'feat','img':_0x2651('0x8d')+SharedConsts[_0x2651('0xbe')]+_0x2651('0xf1'),'description':_0x19914f[_0x2651('0xeb')]});});Renderer['get']()['removeHook']('link',_0x2651('0x10b'),_0x137178);}async[_0x2651('0xc2')](_0x2b1542,_0x49c6ad,_0x430351,_0x5d8971,{casterLevel,abilityAbv,isPrepared,usesPer}){const _0x4f4eba='innate';for(let _0x262903=0x1;_0x262903<=0x9;++_0x262903){const _0xc1ca1b=_0x262903+'e';const _0x1f5159=[..._0x49c6ad[_0x430351][_0x262903]||[],..._0x49c6ad[_0x430351][_0xc1ca1b]||[]];if(!_0x1f5159[_0x2651('0xca')])continue;const _0x357e88=await DataConverter[_0x2651('0x13')](_0x2b1542['actor'],JSON['stringify'](_0x1f5159),{'isTemporary':_0x2b1542[_0x2651('0x4c')],'optsGetSpellItem':{'casterLevel':casterLevel,'abilityAbv':abilityAbv,'isPrepared':isPrepared,'preparationMode':_0x4f4eba,'usesCurrent':_0x262903,'usesMax':_0x262903,'usesPer':usesPer}});_0x5d8971(_0x357e88);}delete _0x49c6ad[_0x430351];}static['_getCasterLevelFromEntry'](_0x47afb2){let _0x5e9b64=0x0;if(_0x47afb2[_0x2651('0x6c')]){JSON[_0x2651('0x9a')](_0x47afb2[_0x2651('0x6c')])[_0x2651('0x40')](/an? (\d+)[A-Za-z]+-level/i,(..._0x5ec9d8)=>{const _0x4c91c0=Number(_0x5ec9d8[0x1]);if(!isNaN(_0x4c91c0))_0x5e9b64=_0x4c91c0;});}return _0x5e9b64;}static['_getCasterClassFromEntry'](_0x430ecf){let _0x72e325='';if(_0x430ecf[_0x2651('0x6c')]){JSON[_0x2651('0x9a')](_0x430ecf['headerEntries'])[_0x2651('0x40')](/(?:^| )(bard|cleric|druid|paladin|ranger|sorcerer|warlock|wizard)(?:\W|$)?/i,(..._0x300630)=>{_0x72e325=_0x300630[0x1];});}return _0x72e325;}}ImportListCreature[_0x2651('0xfc')]={'saveAbility':'','saveScaling':_0x2651('0x26'),'saveDc':null};ImportListCreature[_0x2651('0xa9')]=class extends Application{constructor(_0x4d7d5d,_0x47a498,_0x772056){super({'title':'Scale\x20and\x20Rename\x20Creatures','template':SharedConsts[_0x2651('0x7b')]+'/template/ImportListCreatureScaleRename.handlebars','width':0x3c0,'height':Util[_0x2651('0x9')](),'resizable':!![]});this[_0x2651('0x1d')]=_0x4d7d5d;this[_0x2651('0x8e')]=_0x47a498;this[_0x2651('0x9f')]=_0x772056[_0x2651('0xd')];this[_0x2651('0xfd')]=null;this[_0x2651('0xe3')]=null;}[_0x2651('0x5f')](){return{...super[_0x2651('0x5f')](),'rows':this['_monList'][_0x2651('0xaa')]((_0x1ad5e3,_0x20b921)=>({'name':_0x1ad5e3[_0x2651('0xf2')],'source':_0x1ad5e3[_0x2651('0x73')],'sourceShort':Parser[_0x2651('0xa4')](_0x1ad5e3[_0x2651('0x73')]),'sourceLong':Parser['sourceJsonToFull'](_0x1ad5e3[_0x2651('0x73')]),'cr':Parser[_0x2651('0xa8')](_0x1ad5e3['cr']),'isAdjustable':Parser[_0x2651('0xd4')](_0x1ad5e3['cr'])!==0x64,'ix':_0x20b921}))};}[_0x2651('0x82')](_0x1613e0){super['activateListeners'](_0x1613e0);this[_0x2651('0xfd')]=new List({'$iptSearch':_0x1613e0[_0x2651('0x30')](_0x2651('0xcb')),'$wrpList':_0x1613e0['find'](_0x2651('0x20')),'valueNames':['name',_0x2651('0x73'),'cr','ixSub']});SortUtil[_0x2651('0x2')](_0x1613e0[_0x2651('0x30')]('[data-name=\x22wrp-btns-sort\x22]'),this['_list']);this[_0x2651('0xfd')]['doAbsorbItems'](this[_0x2651('0x1d')],{'fnGetName':_0x12db3b=>_0x12db3b[_0x2651('0xf2')],'fnGetValues':_0x2a7a94=>({'source':_0x2a7a94[_0x2651('0x73')],'cr':Parser[_0x2651('0xa8')](_0x2a7a94['cr'])})});this[_0x2651('0xfd')][_0x2651('0x56')]();this[_0x2651('0xe3')]=_0x1613e0['find'](_0x2651('0xab'))[_0x2651('0x114')](()=>{_0x1613e0[_0x2651('0x30')](_0x2651('0xcb'))[_0x2651('0xe5')]('');if(this[_0x2651('0xfd')])this[_0x2651('0xfd')][_0x2651('0x25')]();});_0x1613e0['find'](_0x2651('0x2e'))[_0x2651('0x114')](async()=>{const _0x5f2c2e=this[_0x2651('0xfd')][_0x2651('0xef')][_0x2651('0xaa')](_0x5c704b=>{const _0x218d1e=$(_0x5c704b[_0x2651('0x10b')]);const _0x42fa94=_0x218d1e[_0x2651('0x30')](_0x2651('0xb2'));return{'ix':_0x5c704b['ix'],'targetCr':_0x42fa94[_0x2651('0xca')]?Number(_0x42fa94[_0x2651('0xe5')]())===-0x1?null:Number(_0x42fa94['val']()):null,'rename':_0x218d1e[_0x2651('0x30')](_0x2651('0x2c'))[_0x2651('0xe5')]()[_0x2651('0x12')]()};});const _0x2a4463=await Promise[_0x2651('0x2d')](_0x5f2c2e[_0x2651('0xaa')](async({ix,targetCr,rename})=>{let _0x578f52=this[_0x2651('0x1d')][ix];if(targetCr!=null&&targetCr!==Parser[_0x2651('0xd4')](_0x578f52['cr']))_0x578f52=await ScaleCreature['scale'](_0x578f52,targetCr);if(rename)_0x578f52=ImportListCreature['ScaleRename']['_getRenamedMon'](_0x578f52,rename);return _0x578f52;}));this[_0x2651('0x8e')](_0x2a4463);this[_0x2651('0xb3')]();});if(this[_0x2651('0xe3')])this['_$btnReset'][_0x2651('0x114')]();}static[_0x2651('0x59')](_0x356684,_0x5167b2){_0x356684=MiscUtil[_0x2651('0xf6')](_0x356684);const _0x169daf=_0x5167b2[_0x2651('0x40')](/\\/g,'\x5c\x5c')[_0x2651('0x40')](/"/g,'\x5c\x22');const _0x21a417=_0x3c5007=>{_0x356684[_0x3c5007]&&_0x356684[_0x3c5007][_0x2651('0x58')](_0xa3e4f6=>{if(_0xa3e4f6[_0x2651('0x74')])_0xa3e4f6[_0x2651('0x74')]=JSON[_0x2651('0x4b')](JSON[_0x2651('0x9a')](_0xa3e4f6[_0x2651('0x74')])[_0x2651('0x40')](new RegExp(_0x356684['name'],'gi'),_0x169daf));if(_0xa3e4f6['headerEntries'])_0xa3e4f6[_0x2651('0x6c')]=JSON['parse'](JSON[_0x2651('0x9a')](_0xa3e4f6['headerEntries'])[_0x2651('0x40')](new RegExp(_0x356684[_0x2651('0xf2')],'gi'),_0x169daf));});};_0x21a417(_0x2651('0x35'));_0x21a417(_0x2651('0x8a'));_0x21a417('trait');_0x21a417(_0x2651('0x90'));_0x21a417(_0x2651('0x17'));_0x356684['_displayName']=_0x5167b2;return _0x356684;}async[_0x2651('0xb3')](){this['_resolve'](null);return super['close']();}};export{ImportListCreature};