const _0x577b=['PG_FEATS','PG_BESTIARY','type','label','Failed\x20to\x20import\x20\x22','PG_CONDITIONS_DISEASES','rolledBy','_handlePacket','textarea.rivet-transfer','trim','\x22!\x20You\x20may\x20need\x20to\x20update\x20your\x20extension.','isWhisper','rivet.receive','Unhandled\x20Rivet\x20message\x20with\x20type\x20\x22','\x22\x20to\x20actor\x20\x22','notifications','info','name','pInit','isTemp','entity','STR_SEE_CONSOLE','_pHandleEntityMessage','PG_BACKGROUNDS','dice','log','collection','rivet','init','get','data','PG_PSIONICS','remove','PG_OPT_FEATURES','rivet.receive-text','Plutonium\x20does\x20not\x20yet\x20support\x20entities\x20from\x20\x22','\x20to\x20','(Unnamed\x20entity)','page','PG_RACES','roll','val','error','PG_VARIATNRULES','folder','userId','settings','actor','isSendRolls','PG_TABLES','detail','Received\x20Rivet\x20message\x20(text)','targetActorId'];(function(_0x3df436,_0x577bbe){const _0x17e450=function(_0x10c5a2){while(--_0x10c5a2){_0x3df436['push'](_0x3df436['shift']());}};_0x17e450(++_0x577bbe);}(_0x577b,0x74));const _0x17e4=function(_0x3df436,_0x577bbe){_0x3df436=_0x3df436-0x0;let _0x17e450=_0x577b[_0x3df436];return _0x17e450;};'use strict';import{ImportListFeat}from'./ImportListFeat.js';import{ImportListCreature}from'./ImportListCreature.js';import{ImportListSpell}from'./ImportListSpell.js';import{ImportListItem}from'./ImportListItem.js';import{ImportListRace}from'./ImportListRace.js';import{ImportListClass}from'./ImportListClass.js';import{ImportListBackground}from'./ImportListBackground.js';import{ImportListVariantRule}from'./ImportListVariantRule.js';import{ImportListRollableTable}from'./ImportListRollableTable.js';import{ImportListPsionic}from'./ImportListPsionic.js';import{ImportListOptionalFeature}from'./ImportListOptionalFeature.js';import{ImportListConditionDisease}from'./ImportListConditionDisease.js';import{Config}from'./Config.js';import{LGT}from'./Util.js';import{UtilApplications}from'./UtilApplications.js';class RivetBridge{static[_0x17e4('0x12')](){window['addEventListener'](_0x17e4('0x2'),_0x281083=>{console[_0x17e4('0xf')](...LGT,'Received\x20Rivet\x20message\x20(JSON)');this[_0x17e4('0x32')](_0x281083[_0x17e4('0x28')]);});window['addEventListener'](_0x17e4('0x18'),()=>{console['log'](...LGT,_0x17e4('0x29'));const _0x301130=$(_0x17e4('0x33'));const _0x410e88=_0x301130['last']()[_0x17e4('0x1f')]();_0x301130[_0x17e4('0x16')]();this['_handlePacket'](JSON['parse'](_0x410e88));});}static['_handlePacket'](_0x9fe25e){switch(_0x9fe25e[_0x17e4('0x2d')]){case _0x17e4('0x1e'):return this['_handleRollMessage'](_0x9fe25e);case _0x17e4('0xa'):return this[_0x17e4('0xc')](_0x9fe25e);default:ui[_0x17e4('0x5')][_0x17e4('0x20')](_0x17e4('0x3')+_0x9fe25e['type']+_0x17e4('0x0'));}}static['_handleRollMessage'](_0x564086){const _0x417d5b=_0x564086['data'];if(!_0x564086[_0x17e4('0x24')][_0x17e4('0x26')])return;const _0x9c7a4b=new Roll(_0x417d5b[_0x17e4('0xe')]);const _0x574120=[];if(_0x564086[_0x17e4('0x24')][_0x17e4('0x1')])_0x574120['push'](game[_0x17e4('0x23')]);_0x9c7a4b['toMessage']({'speaker':{'alias':_0x417d5b[_0x17e4('0x31')]},'flavor':_0x417d5b[_0x17e4('0x2e')],'rollMode':_0x17e4('0x1e'),'whisper':_0x574120});}static async['_pHandleEntityMessage'](_0x1bb1d9){const _0x282859=_0x1bb1d9[_0x17e4('0x14')];const _0x4fc7ad=(Config[_0x17e4('0x13')](_0x17e4('0x11'),_0x17e4('0x2a'))||'')[_0x17e4('0x34')]();const _0x465006=_0x4fc7ad?Actor[_0x17e4('0x10')]['get'](_0x4fc7ad):'';const _0xa716d5=(()=>{switch(_0x282859[_0x17e4('0x1c')]){case UrlUtil[_0x17e4('0x2b')]:return new ImportListFeat({'actor':_0x465006});case UrlUtil[_0x17e4('0x2c')]:return new ImportListCreature({});case UrlUtil['PG_SPELLS']:return new ImportListSpell({'actor':_0x465006});case UrlUtil['PG_ITEMS']:return new ImportListItem({'actor':_0x465006});case UrlUtil[_0x17e4('0x1d')]:return new ImportListRace({'actor':_0x465006});case UrlUtil[_0x17e4('0xd')]:return new ImportListBackground({'actor':_0x465006});case UrlUtil[_0x17e4('0x21')]:return new ImportListVariantRule({});case UrlUtil[_0x17e4('0x27')]:return new ImportListRollableTable({});case UrlUtil[_0x17e4('0x15')]:return new ImportListPsionic({'actor':_0x465006});case UrlUtil[_0x17e4('0x17')]:return new ImportListOptionalFeature({'actor':_0x465006});case UrlUtil[_0x17e4('0x30')]:return new ImportListConditionDisease({'actor':_0x465006});default:return null;}})();if(!_0xa716d5)return ui[_0x17e4('0x5')][_0x17e4('0x20')](_0x17e4('0x19')+_0x282859[_0x17e4('0x1c')]+_0x17e4('0x0'));try{await _0xa716d5[_0x17e4('0x8')]();const _0x198258={};if(_0x282859[_0x17e4('0x9')])_0x198258[_0x17e4('0x9')]=!![];const _0x4a1b0c=await _0xa716d5['pImportEntry'](_0x282859[_0x17e4('0xa')],_0x198258);if(_0x4a1b0c[_0x17e4('0x25')]){ui[_0x17e4('0x5')]['info']('Imported\x20\x22'+(_0x4a1b0c['name']||_0x17e4('0x1b'))+_0x17e4('0x4')+_0x4a1b0c[_0x17e4('0x25')][_0x17e4('0x7')]+'\x22.');}else{const _0x5e1366=_0x4a1b0c[_0x17e4('0x22')]?_0x4a1b0c['folder']['data'][_0x17e4('0x2d')]:null;const _0xcc32c3=UtilApplications['getFolderPath'](_0x4a1b0c);ui[_0x17e4('0x5')][_0x17e4('0x6')]('Imported\x20\x22'+(_0x4a1b0c[_0x17e4('0x7')]||_0x4a1b0c[_0x17e4('0x14')]['name']||'(Unnamed\x20entity)')+'\x22'+(_0x5e1366&&_0xcc32c3?_0x17e4('0x1a')+_0x5e1366+'\x20folder\x20\x22'+_0xcc32c3+'\x22.':''));}}catch(_0x1dfb5f){ui['notifications'][_0x17e4('0x20')](_0x17e4('0x2f')+(_0x282859[_0x17e4('0xa')][_0x17e4('0x7')]||_0x17e4('0x1b'))+'\x22!\x20'+VeCt[_0x17e4('0xb')]);setTimeout(()=>{throw _0x1dfb5f;});}}}export{RivetBridge};