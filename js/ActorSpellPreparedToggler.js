const _0x3cd4=['addToFilters','[data-name=\x22wrp-btns-sort\x22]','.fltr__mini-view','_actorItems','Ritual','setNextState','_fMisc','type','prepared','_activateListeners_initListAndFilters','_pageFilter','/template/ActorSpellPreparedToggler.handlebars','resetNextState','cbSel','name','_activateListeners_initBtnRun','forEach','material','.search','_list','components','getFltrSpellLevelStr','toDisplay','pHandleButtonClick','Spell\x20Prepared\x20Toggler','handleSelectClick','_$btnReset','Material','preparation','sortMetaFilter','_levelFilter','actor','Level','teardown','somatic','ele','level','getData','toggleClass','.veapp__list','prop','get','update','[name=\x22btn-run\x22]','_$iptSearch','_actor','find','doAbsorbItems','_rows','Verbal','EVNT_VALCHANGE','_miscFilter','[name=btn-filter]','mode','$dispModified','close','_filterBox','ritual','tool-actor-spell-prepared-toggler','[name=\x22btn-reset\x22]','render','data','checked','bind','then','MODULE_LOCATION','filters','_handleFilterChange','visibleItems','getMaxWindowHeight','getValues','click','_activateListeners_initBtnReset','vocal','initBtnSortHandlers','items','AppFilter','Concentration','activateListeners','filter','push','addItem','filterBox','input','[name=\x22cb-select-all\x22]','pCommitState','sortSpells','map'];(function(_0x1f355b,_0x3cd447){const _0x53dded=function(_0x2df75f){while(--_0x2df75f){_0x1f355b['push'](_0x1f355b['shift']());}};_0x53dded(++_0x3cd447);}(_0x3cd4,0xe7));const _0x53dd=function(_0x1f355b,_0x3cd447){_0x1f355b=_0x1f355b-0x0;let _0x53dded=_0x3cd4[_0x1f355b];return _0x53dded;};'use strict';import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{AppFilter}from'./FilterApplications.js';class ActorSpellPreparedToggler extends Application{static[_0x53dd('0x38')](_0x27b531,_0x23acd4,_0x16302b,_0x577510){const _0x24a4b9=new ActorSpellPreparedToggler(_0x23acd4[_0x53dd('0x40')]);_0x24a4b9[_0x53dd('0x5')](!![]);}constructor(_0x76cbc9){super({'title':_0x53dd('0x39'),'template':SharedConsts[_0x53dd('0xa')]+_0x53dd('0x2c'),'width':0x1e0,'height':Util[_0x53dd('0xe')](),'resizable':!![]});this[_0x53dd('0x4e')]=_0x76cbc9;this[_0x53dd('0x24')]=this[_0x53dd('0x4e')][_0x53dd('0x14')][_0x53dd('0x18')](_0xe464b4=>_0xe464b4[_0x53dd('0x28')]==='spell'&&_0xe464b4[_0x53dd('0x6')][_0x53dd('0x6')][_0x53dd('0x45')]!==0x0&&_0xe464b4[_0x53dd('0x6')][_0x53dd('0x6')]['preparation']&&_0xe464b4['data'][_0x53dd('0x6')][_0x53dd('0x3d')][_0x53dd('0x56')]===_0x53dd('0x29'));this[_0x53dd('0x2b')]=new ActorSpellPreparedToggler['AppFilter']();this['_list']=null;this[_0x53dd('0x3b')]=null;this[_0x53dd('0x4d')]=null;}[_0x53dd('0xc')](){const _0x569869=this[_0x53dd('0x2b')][_0x53dd('0x1b')][_0x53dd('0xf')]();this[_0x53dd('0x34')][_0x53dd('0x18')](_0x2ed375=>this[_0x53dd('0x2b')][_0x53dd('0x37')](_0x569869,this[_0x53dd('0x51')][_0x2ed375['ix']]));}[_0x53dd('0x17')](_0x7c24cf){super['activateListeners'](_0x7c24cf);this['_activateListeners_initBtnRun'](_0x7c24cf);this[_0x53dd('0x11')](_0x7c24cf);this[_0x53dd('0x2a')](_0x7c24cf);}[_0x53dd('0x30')](_0xe29512){_0xe29512[_0x53dd('0x4f')](_0x53dd('0x4c'))[_0x53dd('0x10')](async()=>{for(const _0x527f82 of this[_0x53dd('0x34')][_0x53dd('0x14')]){await _0x527f82[_0x53dd('0x6')][_0x53dd('0x1e')]();}});}[_0x53dd('0x11')](_0xcb2350){this[_0x53dd('0x3b')]=_0xcb2350[_0x53dd('0x4f')](_0x53dd('0x4'))[_0x53dd('0x10')](()=>{_0xcb2350[_0x53dd('0x4f')](_0x53dd('0x33'))['val']('');if(!this[_0x53dd('0x34')])return;this[_0x53dd('0x34')]['reset']();this[_0x53dd('0x34')][_0x53dd('0x14')]['forEach'](_0x29318f=>_0x29318f['data'][_0x53dd('0x2d')]());});}[_0x53dd('0x2a')](_0x774172){this[_0x53dd('0x4d')]=_0x774172['find']('.search');this[_0x53dd('0x34')]=new List({'$iptSearch':this[_0x53dd('0x4d')],'$wrpList':_0x774172[_0x53dd('0x4f')](_0x53dd('0x48')),'isUseJquery':!![],'fnSort':PageFilterSpells[_0x53dd('0x1f')]});SortUtil[_0x53dd('0x13')](_0x774172[_0x53dd('0x4f')](_0x53dd('0x22')),this[_0x53dd('0x34')]);const _0x5eb64d=_0x774172[_0x53dd('0x4f')](_0x53dd('0x1d'))['change'](()=>{const _0x2d3ee9=_0x5eb64d[_0x53dd('0x49')]('checked');this['_list'][_0x53dd('0xd')][_0x53dd('0x31')](_0x3743d0=>_0x3743d0[_0x53dd('0x6')][_0x53dd('0x26')](_0x2d3ee9));});this[_0x53dd('0x2b')]['pInitFilterBox']({'$iptSearch':this['_$iptSearch'],'$btnReset':this[_0x53dd('0x3b')],'$btnOpen':_0x774172[_0x53dd('0x4f')](_0x53dd('0x55')),'$btnToggleSummaryHidden':_0x774172[_0x53dd('0x4f')]('[name=btn-toggle-summary]'),'$wrpMiniPills':_0x774172['find'](_0x53dd('0x23')),'namespace':_0x53dd('0x3')})[_0x53dd('0x9')](()=>{this[_0x53dd('0x51')][_0x53dd('0x31')](_0x293112=>this[_0x53dd('0x2b')][_0x53dd('0x21')](_0x293112));this[_0x53dd('0x34')][_0x53dd('0x50')](this[_0x53dd('0x24')],{'fnGetName':_0x5b1a24=>_0x5b1a24['name'],'fnGetValues':_0x2ea864=>({'level':MiscUtil[_0x53dd('0x4a')](_0x2ea864,'data',_0x53dd('0x6'),_0x53dd('0x45'))||-0x1}),'fnGetData':_0x1ddb7c=>{const _0x122f33=$(_0x1ddb7c[_0x53dd('0x44')]);return{'cbSel':_0x122f33['find'](_0x53dd('0x1c'))[0x0],'$dispModified':_0x122f33[_0x53dd('0x4f')]('.act-sp-prep__disp-modified')};},'fnBindListeners':(_0x38c7ad,_0x486a03)=>{const _0x381e6d={'prepared':_0x486a03[_0x53dd('0x6')][_0x53dd('0x6')][_0x53dd('0x3d')]['prepared']};const _0x12f8cc=()=>{_0x38c7ad[_0x53dd('0x6')][_0x53dd('0x2e')][_0x53dd('0x7')]=_0x381e6d[_0x53dd('0x29')];_0x38c7ad[_0x53dd('0x6')][_0x53dd('0x57')][_0x53dd('0x47')]('ve-hidden',_0x486a03['data'][_0x53dd('0x6')][_0x53dd('0x3d')][_0x53dd('0x29')]===_0x381e6d['prepared']);};const _0x1878c0=_0x4cb548=>{_0x381e6d[_0x53dd('0x29')]=_0x4cb548;_0x12f8cc();};const _0x2ea2c1=()=>{_0x381e6d[_0x53dd('0x29')]=_0x486a03[_0x53dd('0x6')][_0x53dd('0x6')][_0x53dd('0x3d')]['prepared'];_0x12f8cc();};const _0x29b730=async()=>{await _0x486a03[_0x53dd('0x4b')]({'data':{'preparation':{'prepared':_0x381e6d[_0x53dd('0x29')]}}});_0x12f8cc();};_0x38c7ad[_0x53dd('0x6')][_0x53dd('0x26')]=_0x1878c0;_0x38c7ad[_0x53dd('0x6')][_0x53dd('0x2d')]=_0x2ea2c1;_0x38c7ad[_0x53dd('0x6')][_0x53dd('0x1e')]=_0x29b730;_0x38c7ad['ele']['addEventListener'](_0x53dd('0x10'),_0x2fb16a=>{ModalFilter[_0x53dd('0x3a')](this['_list'],_0x38c7ad,_0x2fb16a,{'isNoHighlightSelection':!![],'fnOnSelectionChange':(_0x122159,_0x786349)=>_0x122159['data']['setNextState'](_0x786349)});});}});this[_0x53dd('0x34')]['init']();this['_pageFilter'][_0x53dd('0x1b')][_0x53dd('0x5')]();$(this[_0x53dd('0x2b')][_0x53dd('0x1b')])['on'](FilterBox[_0x53dd('0x53')],this[_0x53dd('0xc')][_0x53dd('0x8')](this));this[_0x53dd('0xc')]();});}[_0x53dd('0x46')](){this['_rows']=this[_0x53dd('0x24')][_0x53dd('0x20')]((_0xc7d5e3,_0x3c9f34)=>({'name':_0xc7d5e3[_0x53dd('0x2f')],'isPrepared':_0xc7d5e3[_0x53dd('0x6')]['data'][_0x53dd('0x3d')][_0x53dd('0x29')],'level':MiscUtil[_0x53dd('0x4a')](_0xc7d5e3,_0x53dd('0x6'),_0x53dd('0x6'),_0x53dd('0x45'))||-0x1,'concentration':!!MiscUtil[_0x53dd('0x4a')](_0xc7d5e3,_0x53dd('0x6'),'data',_0x53dd('0x35'),'concentration'),'v':!!MiscUtil[_0x53dd('0x4a')](_0xc7d5e3,_0x53dd('0x6'),'data',_0x53dd('0x35'),_0x53dd('0x12')),'s':!!MiscUtil[_0x53dd('0x4a')](_0xc7d5e3,_0x53dd('0x6'),_0x53dd('0x6'),_0x53dd('0x35'),_0x53dd('0x43')),'m':!!MiscUtil[_0x53dd('0x4a')](_0xc7d5e3,_0x53dd('0x6'),_0x53dd('0x6'),_0x53dd('0x35'),_0x53dd('0x32')),'ritual':!!MiscUtil[_0x53dd('0x4a')](_0xc7d5e3,'data','data',_0x53dd('0x35'),_0x53dd('0x2')),'ix':_0x3c9f34}));return{...super[_0x53dd('0x46')](),'rows':this[_0x53dd('0x51')]};}[_0x53dd('0x0')](..._0x4a498b){super[_0x53dd('0x0')](..._0x4a498b);this[_0x53dd('0x2b')][_0x53dd('0x42')]();}}ActorSpellPreparedToggler[_0x53dd('0x15')]=class extends AppFilter{constructor(){super();this[_0x53dd('0x3f')]=new Filter({'header':_0x53dd('0x41'),'items':[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9],'displayFn':_0x6e01a5=>~_0x6e01a5?PageFilterSpells[_0x53dd('0x36')](_0x6e01a5):'Unknown'});this[_0x53dd('0x54')]=new Filter({'header':'Components\x20&\x20Miscellaneous','items':[_0x53dd('0x16'),'Verbal','Somatic',_0x53dd('0x3c'),_0x53dd('0x25')],'itemSortFn':PageFilterSpells[_0x53dd('0x3e')]});}[_0x53dd('0x21')](_0x20eabc,_0x53a014){if(_0x53a014)return;this[_0x53dd('0x3f')][_0x53dd('0x1a')](_0x20eabc[_0x53dd('0x45')]);_0x20eabc[_0x53dd('0x27')]=[];if(_0x20eabc['concentration'])_0x20eabc['_fMisc'][_0x53dd('0x19')]('Concentration');if(_0x20eabc['v'])_0x20eabc[_0x53dd('0x27')][_0x53dd('0x19')](_0x53dd('0x52'));if(_0x20eabc['s'])_0x20eabc[_0x53dd('0x27')][_0x53dd('0x19')]('Somatic');if(_0x20eabc['m'])_0x20eabc[_0x53dd('0x27')][_0x53dd('0x19')](_0x53dd('0x3c'));if(_0x20eabc[_0x53dd('0x2')])_0x20eabc['_fMisc'][_0x53dd('0x19')](_0x53dd('0x25'));}async['_pPopulateBoxOptions'](_0x141762){_0x141762[_0x53dd('0xb')]=[this[_0x53dd('0x3f')],this['_miscFilter']];}['toDisplay'](_0x590bd7,_0x555681){return this[_0x53dd('0x1')][_0x53dd('0x37')](_0x590bd7,_0x555681[_0x53dd('0x45')],_0x555681['_fMisc']);}};export{ActorSpellPreparedToggler};